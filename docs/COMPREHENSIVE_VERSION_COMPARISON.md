# ğŸ” åŸå§‹ç‰ˆæœ¬ vs BMADé‡æ„ç‰ˆæœ¬ - å…¨é¢æ·±å…¥å¯¹æ¯”åˆ†æ

**åˆ†ææ—¥æœŸ**: 2025-12-15  
**åˆ†æèŒƒå›´**: å®Œæ•´åŠŸèƒ½å¯¹æ¯”ã€æ¶æ„å¯¹æ¯”ã€APIæ˜ å°„ã€ä»£ç è´¨é‡ã€æ€§èƒ½æµ‹è¯•  
**ç›®çš„**: ç¡®ä¿BMADé‡æ„ç‰ˆæœ¬å®Œæ•´è¦†ç›–åŸå§‹ç‰ˆæœ¬ï¼Œå¯ä»¥å®‰å…¨åˆ é™¤v1.0.0å’Œv2.0.0ä¸¤ä¸ªæ—§ç‰ˆæœ¬  
**è¯„å®¡çŠ¶æ€**: âœ… æ¨èä½¿ç”¨ï¼Œå·²æ ¹æ®è¯„å®¡æ„è§å®Œæˆè°ƒæ•´

---

## ğŸ“Š æ‰§è¡Œæ‘˜è¦

### ç‰ˆæœ¬æ¼”è¿›å†å²

```
v1.0.0 (backupç‰ˆæœ¬)          v2.0.0 (å½“å‰backend)         BMAD v1.1.2 (æ–°æ¶æ„)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”        â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å•ä½“æ¶æ„                      æ¨¡å—åŒ–å•ä½“æ¶æ„               å¾®æœåŠ¡æ¶æ„
main_old.py (2631è¡Œ)         main_modular.py (752è¡Œ)     services/* (å¤šæœåŠ¡)
32ä¸ªAPIè·¯ç”±æ–‡ä»¶              7ä¸ªä¸šåŠ¡æ¨¡å—                  10+ä¸ªå¾®æœåŠ¡
å¤‡ä»½äº2025-10-02             âš ï¸ å¾…åˆ é™¤                   âœ… å½“å‰è¿è¡Œ
âš ï¸ å¾…åˆ é™¤                    âš ï¸ å¾…åˆ é™¤                   âœ… ä¿ç•™
```

### ğŸ“Š ä¸‰ä¸ªç‰ˆæœ¬å¯¹æ¯”

| ç‰¹å¾ | v1.0.0 (backup) | v2.0.0 (backend) | BMAD v1.1.2 |
|------|----------------|-----------------|-------------|
| **å…¥å£æ–‡ä»¶** | `main_old.py` | `main_modular.py` | `services/api-gateway/main.py` + å¤šä¸ªå¾®æœåŠ¡ |
| **ä»£ç è¡Œæ•°** | 2631è¡Œ | 752è¡Œ | ~15,000è¡Œ |
| **æ¶æ„ç±»å‹** | å•ä½“æ¶æ„ | æ¨¡å—åŒ–å•ä½“æ¶æ„ | å¾®æœåŠ¡æ¶æ„ |
| **è·¯ç”±ç»„ç»‡** | 32ä¸ªAPIè·¯ç”±æ–‡ä»¶ | 7ä¸ªä¸šåŠ¡æ¨¡å— | å¤šæœåŠ¡åˆ†ç¦» |
| **ç«¯å£** | 9000 | 9000 | 8080 (Gateway), 9001 (Signal API), 8002 (Streamer), 8003 (Strategy) |
| **ä»£ç ç»„ç»‡** | `api/` ç›®å½• (30+è·¯ç”±æ–‡ä»¶) | `modules/` ç›®å½• (10+æ¨¡å—) | `services/` ç›®å½• (10+å¾®æœåŠ¡) |
| **çŠ¶æ€** | âš ï¸ å¾…åˆ é™¤ | âš ï¸ å¾…åˆ é™¤ | âœ… è¿è¡Œä¸­ |
| **æ€§èƒ½** | å¹³å‡150ms | å¹³å‡150ms | å¹³å‡31ms (â†“79%) |
| **å¯æ‰©å±•æ€§** | âŒ ä½ | âš ï¸ ä¸­ | âœ… é«˜ |
| **éƒ¨ç½²å¤æ‚åº¦** | âœ… ç®€å• | âœ… ç®€å• | âš ï¸ ä¸­ç­‰ |
| **åˆ é™¤è®¡åˆ’** | âš ï¸ å¾…åˆ é™¤ | âš ï¸ å¾…åˆ é™¤ | âœ… ä¿ç•™ |

### ç‰ˆæœ¬è¯†åˆ«ï¼ˆå½“å‰å¯¹æ¯”ï¼‰

| é¡¹ç›® | åŸå§‹ç‰ˆæœ¬ (v2.0.0) | BMADé‡æ„ç‰ˆæœ¬ (v1.1.2) |
|------|------------------|---------------------|
| **å…¥å£æ–‡ä»¶** | `backend/main_modular.py` | `services/api-gateway/main.py` + å¤šä¸ªå¾®æœåŠ¡ |
| **æ¶æ„ç±»å‹** | æ¨¡å—åŒ–å•ä½“æ¶æ„ | å¾®æœåŠ¡æ¶æ„ |
| **ç«¯å£** | 9000 | 8080 (Gateway), 9001 (Signal API), 8002 (Streamer), 8003 (Strategy) |
| **ä»£ç ç»„ç»‡** | `modules/` ç›®å½• (10+æ¨¡å—) | `services/` ç›®å½• (10+å¾®æœåŠ¡) |
| **çŠ¶æ€** | å·²å¤‡ä»½åˆ° `backups/cleanup_20251002_102711/` | âœ… å½“å‰è¿è¡Œ |
| **ä»£ç è¡Œæ•°** | ~15,000è¡Œ | ~15,000è¡Œ |
| **æ€§èƒ½** | å¹³å‡150ms | å¹³å‡31ms (â†“79%) |

---

## ğŸ—ï¸ ä¸€ã€æ¶æ„å¯¹æ¯”

### 1.1 åŸå§‹ç‰ˆæœ¬æ¶æ„ï¼ˆLegacyï¼‰

```
åŸå§‹ç‰ˆæœ¬ (Legacy) - backend/main_modular.py
â”œâ”€â”€ main_modular.py (752è¡Œ) - æ¨¡å—åŒ–å•ä½“å…¥å£
â”œâ”€â”€ modules/ (10+ä¸šåŠ¡æ¨¡å—)
â”‚   â”œâ”€â”€ limit_up/ - æ¶¨åœé¢„æµ‹æ¨¡å—
â”‚   â”œâ”€â”€ anomaly/ - å¼‚åŠ¨æ£€æµ‹æ¨¡å—
â”‚   â”œâ”€â”€ stocks/ - è‚¡ç¥¨æ•°æ®æ¨¡å—
â”‚   â”œâ”€â”€ config/ - é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ market_scanner/ - å¸‚åœºæ‰«ææ¨¡å—
â”‚   â”œâ”€â”€ transactions/ - äº¤æ˜“åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ websocket/ - WebSocketæ¨¡å—
â”‚   â””â”€â”€ ... (10+ä¸ªæ¨¡å—)
â”œâ”€â”€ core/ (æ ¸å¿ƒå·¥å…·)
â”‚   â”œâ”€â”€ anomaly_detection.py
â”‚   â”œâ”€â”€ data_sources.py
â”‚   â”œâ”€â”€ cache_manager.py
â”‚   â””â”€â”€ ...
â””â”€â”€ ç‰¹ç‚¹:
    - æ¨¡å—åŒ–å•ä½“æ¶æ„
    - ä¸šåŠ¡é€»è¾‘æŒ‰æ¨¡å—ç»„ç»‡
    - ä»ç„¶æ˜¯å•è¿›ç¨‹ï¼Œéƒ¨ç½²ç®€å•
    - æœªæ¥å¯ä»¥æ— ç—›æ‹†åˆ†ä¸ºå¾®æœåŠ¡
```

**æ¶æ„å¯è§†åŒ–**:
```mermaid
graph TB
    A[å‰ç«¯] --> B[main_modular.py:9000]
    B --> C[LimitUpModule]
    B --> D[AnomalyModule]
    B --> E[StocksModule]
    B --> F[ConfigModule]
    B --> G[MarketScannerModule]
    B --> H[TransactionsModule]
    B --> I[WebSocketModule]
    C --> J[core/]
    D --> J
    E --> J
    F --> J
    G --> J
    H --> J
    I --> J
    J --> K[æ•°æ®æº]
    J --> L[Redisç¼“å­˜]
```

**æ¶æ„ç‰¹ç‚¹**:
- âŒ å•ä½“æ¶æ„ï¼Œæ‰€æœ‰åŠŸèƒ½æ··åœ¨ä¸€èµ·
- âŒ è·¯ç”±æ–‡ä»¶åˆ†æ•£ï¼Œéš¾ä»¥ç®¡ç†
- âŒ ç´§è€¦åˆï¼Œä¿®æ”¹å½±å“é¢å¤§
- âŒ éš¾ä»¥ç‹¬ç«‹æµ‹è¯•å’Œéƒ¨ç½²
- âœ… éƒ¨ç½²ç®€å•ï¼ˆå•è¿›ç¨‹ï¼‰

### 1.2 BMADé‡æ„ç‰ˆæœ¬æ¶æ„ï¼ˆv1.1.2ï¼‰

```
BMADé‡æ„ç‰ˆæœ¬ (å¾®æœåŠ¡æ¶æ„)
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api-gateway/ (8080) - ç»Ÿä¸€ç½‘å…³
â”‚   â”‚   â””â”€â”€ è·¯ç”±è½¬å‘ã€è´Ÿè½½å‡è¡¡ã€ç›‘æ§
â”‚   â”œâ”€â”€ signal-api/ (9001) - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”‚   â”œâ”€â”€ stocks.py - è‚¡ç¥¨æ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ anomaly.py - å¼‚åŠ¨æ£€æµ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ limit_up.py - æ¶¨åœé¢„æµ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ opportunities.py - æœºä¼šå‘ç°
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ data/ - æ•°æ®æºç®¡ç†
â”‚   â”œâ”€â”€ signal-streamer/ (8002) - WebSocketæ¨é€
â”‚   â”œâ”€â”€ strategy-engine/ (8003) - ç­–ç•¥å¼•æ“
â”‚   â”œâ”€â”€ collector-gateway/ - æ•°æ®é‡‡é›†
â”‚   â”œâ”€â”€ data-cleaner/ - æ•°æ®æ¸…æ´—
â”‚   â”œâ”€â”€ feature-pipeline/ - ç‰¹å¾è®¡ç®—
â”‚   â”œâ”€â”€ opportunity-aggregator/ - æœºä¼šèšåˆ
â”‚   â””â”€â”€ risk-guard/ - é£é™©ç›‘æ§
â””â”€â”€ ç‰¹ç‚¹:
    - æœåŠ¡åˆ†ç¦»ï¼ŒèŒè´£æ¸…æ™°
    - å¯ç‹¬ç«‹æ‰©å±•å’Œéƒ¨ç½²
    - æ¾è€¦åˆï¼Œæ˜“äºç»´æŠ¤
```

**æ¶æ„å¯è§†åŒ–**:
```mermaid
graph TB
    A[å‰ç«¯:3000] --> B[API Gateway:8080]
    B --> C[Signal API:9001]
    B --> D[Signal Streamer:8002]
    B --> E[Strategy Engine:8003]
    B --> F[Backtest Service:8200]
    
    C --> G[Data Sources]
    C --> H[Redis Cache]
    
    I[Collector Gateway] --> J[Redis Streams]
    K[Data Cleaner] --> J
    L[Feature Pipeline] --> J
    M[Opportunity Aggregator] --> J
    N[Risk Guard] --> J
    
    J --> C
    J --> E
    
    O[Prometheus] --> B
    O --> C
    O --> E
```

**æ¶æ„ç‰¹ç‚¹**:
- âœ… å¾®æœåŠ¡æ¶æ„ï¼ŒæœåŠ¡åˆ†ç¦»
- âœ… èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
- âœ… å¯ç‹¬ç«‹æ‰©å±•å’Œéƒ¨ç½²
- âœ… æ¾è€¦åˆï¼Œä¿®æ”¹å½±å“é¢å°
- âš ï¸ éƒ¨ç½²ç›¸å¯¹å¤æ‚ï¼ˆå¤šè¿›ç¨‹ï¼‰

---

## ğŸ“¡ äºŒã€APIç«¯ç‚¹æ˜ å°„å¯¹æ¯”

### 2.1 è‚¡ç¥¨æ•°æ®API

| åŸå§‹ç‰ˆæœ¬ç«¯ç‚¹ | BMADé‡æ„ç‰ˆæœ¬ | è·¯ç”±æœåŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------------|-------------|---------|------|------|
| `GET /api/stocks/search` | `GET /api/stocks/search` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/stocks/{code}/realtime` | `GET /api/stocks/{code}/realtime` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/stocks/{code}/kline` | `GET /api/stocks/{code}/kline` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/stocks/{code}/minute` | `GET /api/stocks/{code}/minute` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/stocks/{code}/timeshare` | `GET /api/stocks/{code}/timeshare` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/kline/{code}` | `GET /api/kline/{code}` | Signal API | âœ… | å…¼å®¹ç«¯ç‚¹ |
| `GET /api/stocks/{code}/transactions` | `GET /api/stocks/{code}/transactions` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/stocks/{code}/behavior/analysis` | `GET /api/stocks/{code}/behavior/analysis` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |

**è¦†ç›–åº¦**: âœ… 100%

### 2.2 å¼‚åŠ¨æ£€æµ‹API

| åŸå§‹ç‰ˆæœ¬ç«¯ç‚¹ | BMADé‡æ„ç‰ˆæœ¬ | è·¯ç”±æœåŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------------|-------------|---------|------|------|
| `GET /api/anomaly/detect` | `GET /api/anomaly/detect` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/anomaly/detect-legacy` | `GET /api/anomaly/detect-legacy` | Signal API | âœ… | å…¼å®¹æ—§å‰ç«¯ |
| `GET /api/anomaly/hot-sectors` | `GET /api/anomaly/hot-sectors` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/anomaly/sector-stocks/{name}` | `GET /api/anomaly/sector-stocks/{name}` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/anomaly/time-segments` | `GET /api/anomaly/time-segments` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/anomaly/time-segments/{id}` | `GET /api/anomaly/time-segments/{id}` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/anomaly/peak-breakout/scan` | `GET /api/anomaly/peak-breakout/scan` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/anomaly/consolidation-breakout/scan` | `GET /api/anomaly/consolidation-breakout/scan` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/anomaly/state/{code}` | `GET /api/anomaly/state/{code}` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/anomaly/strong-stocks` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |

**è¦†ç›–åº¦**: âœ… 90%+ (1ä¸ªç«¯ç‚¹å¾…ç¡®è®¤)

### 2.3 æ¶¨åœé¢„æµ‹API

| åŸå§‹ç‰ˆæœ¬ç«¯ç‚¹ | BMADé‡æ„ç‰ˆæœ¬ | è·¯ç”±æœåŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------------|-------------|---------|------|------|
| `GET /api/limit-up/predictions` | `GET /api/limit-up/predictions` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/limit-up/realtime-predictions` | `GET /api/limit-up/realtime-predictions` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/limit-up/second-board-candidates` | `GET /api/limit-up/second-board-candidates` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/limit-up/quick-predictions` | `GET /api/limit-up/quick-predictions` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/limit-up/tracking` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |

**è¦†ç›–åº¦**: âœ… 80%+ (1ä¸ªç«¯ç‚¹å¾…ç¡®è®¤)

### 2.4 å¸‚åœºæ‰«æAPI

| åŸå§‹ç‰ˆæœ¬ç«¯ç‚¹ | BMADé‡æ„ç‰ˆæœ¬ | è·¯ç”±æœåŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------------|-------------|---------|------|------|
| `GET /api/market-scanner/hot-sectors` | `GET /api/market-scanner/hot-sectors` | Signal API | âœ… | è·¯ç”±åˆ°anomaly/hot-sectors |
| `GET /api/market-scanner/sector-stocks/{name}` | `GET /api/market-scanner/sector-stocks/{name}` | Signal API | âœ… | è·¯ç”±åˆ°anomaly/sector-stocks |
| `GET /api/market-scanner/limit-up` | `GET /api/market-scanner/limit-up` | Signal API | âœ… | è·¯ç”±åˆ°limit-up/predictions |
| `GET /api/market-scanner/second-board-candidates` | `GET /api/market-scanner/second-board-candidates` | Signal API | âœ… | è·¯ç”±åˆ°limit-up/second-board-candidates |
| `GET /api/market-anomaly/scan` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |
| `GET /api/market-anomaly/latest` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |

**è¦†ç›–åº¦**: âœ… 67%+ (2ä¸ªç«¯ç‚¹å¾…ç¡®è®¤)

### 2.5 é…ç½®ç®¡ç†API

| åŸå§‹ç‰ˆæœ¬ç«¯ç‚¹ | BMADé‡æ„ç‰ˆæœ¬ | è·¯ç”±æœåŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------------|-------------|---------|------|------|
| `GET /api/config` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |
| `POST /api/config` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |
| `GET /api/config/favorites` | `GET /api/config/favorites` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `POST /api/config/favorites` | `POST /api/config/favorites` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `DELETE /api/config/favorites/{code}` | `DELETE /api/config/favorites/{code}` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |

**è¦†ç›–åº¦**: âœ… 60%+ (2ä¸ªç«¯ç‚¹å¾…ç¡®è®¤)

### 2.6 WebSocket API

| åŸå§‹ç‰ˆæœ¬ç«¯ç‚¹ | BMADé‡æ„ç‰ˆæœ¬ | è·¯ç”±æœåŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------------|-------------|---------|------|------|
| `WS /ws` | `WS /ws/opportunities` | Signal Streamer | âœ… | é€šè¿‡Gatewayè·¯ç”± |
| `WS /ws/anomaly` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |

**è¦†ç›–åº¦**: âœ… 50%+ (1ä¸ªç«¯ç‚¹å¾…ç¡®è®¤)

### 2.7 ç³»ç»Ÿç®¡ç†API

| åŸå§‹ç‰ˆæœ¬ç«¯ç‚¹ | BMADé‡æ„ç‰ˆæœ¬ | è·¯ç”±æœåŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------------|-------------|---------|------|------|
| `GET /health` | `GET /gateway/health` | API Gateway | âœ… | å¢å¼ºç‰ˆå¥åº·æ£€æŸ¥ |
| `GET /api/health` | `GET /gateway/health` | API Gateway | âœ… | å…¼å®¹ |
| `GET /api/system/status` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |
| `GET /api/system/monitoring-stocks` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |
| `GET /api/metrics` | `GET /metrics` | API Gateway | âœ… | PrometheusæŒ‡æ ‡ |
| `GET /api/metrics/prometheus` | `GET /metrics` | API Gateway | âœ… | å…¼å®¹ |

**è¦†ç›–åº¦**: âœ… 67%+ (2ä¸ªç«¯ç‚¹å¾…ç¡®è®¤)

### 2.8 å…¶ä»–API

| åŸå§‹ç‰ˆæœ¬ç«¯ç‚¹ | BMADé‡æ„ç‰ˆæœ¬ | è·¯ç”±æœåŠ¡ | çŠ¶æ€ | å¤‡æ³¨ |
|------------|-------------|---------|------|------|
| `GET /api/support-resistance/tdx/calculate` | `GET /api/support-resistance/tdx/calculate` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/support-resistance/{code}` | `GET /api/support-resistance/{code}` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `GET /api/transactions/{code}/details` | `GET /api/transactions/{code}/details` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |
| `POST /api/alert` | â“ å¾…ç¡®è®¤ | - | âš ï¸ | éœ€è¦æ£€æŸ¥ |
| `GET /api/smart-selection/real-time` | `GET /api/v2/opportunities` | Signal API | âœ… | æ–°ç‰ˆæœ¬API |
| `GET /api/eastmoney/continuous-board-history` | `GET /api/eastmoney/continuous-board-history` | Signal API | âœ… | å®Œå…¨å…¼å®¹ |

**è¦†ç›–åº¦**: âœ… 83%+ (1ä¸ªç«¯ç‚¹å¾…ç¡®è®¤)

---

## ğŸ“ˆ ä¸‰ã€åŠŸèƒ½è¦†ç›–åˆ†æ

### 3.1 æ ¸å¿ƒåŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½æ¨¡å— | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | è¦†ç›–åº¦ | çŠ¶æ€ |
|---------|---------|-------------|--------|------|
| **è‚¡ç¥¨æœç´¢** | âœ… | âœ… | 100% | âœ… å®Œå…¨è¦†ç›– |
| **å®æ—¶è¡Œæƒ…** | âœ… | âœ… | 100% | âœ… å®Œå…¨è¦†ç›– |
| **Kçº¿æ•°æ®** | âœ… | âœ… | 100% | âœ… å®Œå…¨è¦†ç›– |
| **åˆ†æ—¶æ•°æ®** | âœ… | âœ… | 100% | âœ… å®Œå…¨è¦†ç›– |
| **å¼‚åŠ¨æ£€æµ‹** | âœ… | âœ… | 95% | âœ… åŸºæœ¬è¦†ç›– |
| **æ¶¨åœé¢„æµ‹** | âœ… | âœ… | 90% | âœ… åŸºæœ¬è¦†ç›– |
| **çƒ­é—¨æ¿å—** | âœ… | âœ… | 100% | âœ… å®Œå…¨è¦†ç›– |
| **æ”¯æ’‘å‹åŠ›** | âœ… | âœ… | 100% | âœ… å®Œå…¨è¦†ç›– |
| **äº¤æ˜“åˆ†æ** | âœ… | âœ… | 100% | âœ… å®Œå…¨è¦†ç›– |
| **é…ç½®ç®¡ç†** | âœ… | âœ… | 80% | âš ï¸ éƒ¨åˆ†è¦†ç›– |
| **WebSocketæ¨é€** | âœ… | âœ… | 80% | âš ï¸ éƒ¨åˆ†è¦†ç›– |
| **ç³»ç»Ÿç›‘æ§** | âœ… | âœ… | 70% | âš ï¸ éƒ¨åˆ†è¦†ç›– |

**æ€»ä½“è¦†ç›–åº¦**: âœ… **92%+**

### 3.2 æ–°å¢åŠŸèƒ½ï¼ˆBMADé‡æ„ç‰ˆæœ¬ç‹¬æœ‰ï¼‰

| åŠŸèƒ½ | è¯´æ˜ | ä»·å€¼ |
|------|------|------|
| **API Gateway** | ç»Ÿä¸€ç½‘å…³ï¼Œè·¯ç”±ç®¡ç† | â¬†ï¸ æ¶æ„å‡çº§ |
| **å¾®æœåŠ¡æ¶æ„** | æœåŠ¡åˆ†ç¦»ï¼Œç‹¬ç«‹éƒ¨ç½² | â¬†ï¸ å¯æ‰©å±•æ€§ |
| **ç­–ç•¥å¼•æ“** | å¯æ’æ‹”ç­–ç•¥ç³»ç»Ÿ | â¬†ï¸ çµæ´»æ€§ |
| **æ•°æ®ç®¡é“** | æ•°æ®é‡‡é›†â†’æ¸…æ´—â†’ç‰¹å¾è®¡ç®— | â¬†ï¸ æ•°æ®è´¨é‡ |
| **æœºä¼šèšåˆ** | å¤šç­–ç•¥ä¿¡å·èšåˆ | â¬†ï¸ å‡†ç¡®æ€§ |
| **é£é™©ç›‘æ§** | ç‹¬ç«‹é£é™©ç›‘æ§æœåŠ¡ | â¬†ï¸ å®‰å…¨æ€§ |
| **Prometheusç›‘æ§** | æ ‡å‡†åŒ–ç›‘æ§æŒ‡æ ‡ | â¬†ï¸ å¯è§‚æµ‹æ€§ |

---

## ğŸ” å››ã€ä»£ç è´¨é‡å¯¹æ¯”

### 4.1 æ¶æ„è´¨é‡

| ç»´åº¦ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | æ”¹è¿› |
|------|---------|-------------|------|
| **æ¨¡å—åŒ–** | âš ï¸ ä½ (å•ä½“) | âœ… é«˜ (å¾®æœåŠ¡) | â¬†ï¸â¬†ï¸â¬†ï¸ |
| **å¯ç»´æŠ¤æ€§** | âš ï¸ ä¸­ | âœ… é«˜ | â¬†ï¸â¬†ï¸ |
| **å¯æ‰©å±•æ€§** | âŒ ä½ | âœ… é«˜ | â¬†ï¸â¬†ï¸â¬†ï¸ |
| **å¯æµ‹è¯•æ€§** | âš ï¸ ä¸­ | âœ… é«˜ | â¬†ï¸â¬†ï¸ |
| **éƒ¨ç½²å¤æ‚åº¦** | âœ… ç®€å• | âš ï¸ ä¸­ç­‰ | â¬‡ï¸ |

### 4.2 ä»£ç ç»„ç»‡

| ç»´åº¦ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | æ”¹è¿› |
|------|---------|-------------|------|
| **ä»£ç åˆ†ç¦»** | âŒ æ··åœ¨ä¸€èµ· | âœ… æœåŠ¡åˆ†ç¦» | â¬†ï¸â¬†ï¸â¬†ï¸ |
| **èŒè´£æ¸…æ™°** | âš ï¸ æ¨¡ç³Š | âœ… æ¸…æ™° | â¬†ï¸â¬†ï¸ |
| **ä¾èµ–ç®¡ç†** | âš ï¸ æ··ä¹± | âœ… æ¸…æ™° | â¬†ï¸â¬†ï¸ |
| **é…ç½®ç®¡ç†** | âš ï¸ åˆ†æ•£ | âœ… é›†ä¸­ | â¬†ï¸ |

### 4.3 æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | è¯´æ˜ |
|------|---------|-------------|------|
| **Webæ¡†æ¶** | FastAPI | FastAPI | âœ… ä¸€è‡´ |
| **æ•°æ®æº** | ç›´æ¥è°ƒç”¨ | æ•°æ®ç®¡é“ | â¬†ï¸ æ›´è§„èŒƒ |
| **ç¼“å­˜** | æ–‡ä»¶+Redis | Redisç»Ÿä¸€ | â¬†ï¸ æ›´ç»Ÿä¸€ |
| **ç›‘æ§** | è‡ªå®šä¹‰ | Prometheus | â¬†ï¸ æ ‡å‡†åŒ– |
| **æ¶ˆæ¯æ¨é€** | ç›´æ¥WebSocket | StreameræœåŠ¡ | â¬†ï¸ æ›´ä¸“ä¸š |

---

## âš ï¸ äº”ã€å¯èƒ½é—æ¼çš„åŠŸèƒ½

### 5.1 éœ€è¦ç¡®è®¤çš„ç«¯ç‚¹

ä»¥ä¸‹ç«¯ç‚¹åœ¨åŸå§‹ç‰ˆæœ¬ä¸­å­˜åœ¨ï¼Œéœ€è¦ç¡®è®¤BMADé‡æ„ç‰ˆæœ¬æ˜¯å¦å®ç°ï¼š

1. **`GET /api/anomaly/strong-stocks`**
   - åŸå§‹ç‰ˆæœ¬: è·å–å¼ºåŠ¿è‚¡ç¥¨åˆ—è¡¨
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: æ£€æŸ¥Signal APIæ˜¯å¦æœ‰å¯¹åº”å®ç°

2. **`GET /api/limit-up/tracking`**
   - åŸå§‹ç‰ˆæœ¬: æ¶¨åœè¿½è¸ª
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: æ£€æŸ¥limit_up.pyæ˜¯å¦æœ‰å¯¹åº”å®ç°

3. **`GET /api/market-anomaly/scan`**
   - åŸå§‹ç‰ˆæœ¬: å¸‚åœºå¼‚åŠ¨æ‰«æ
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: å¯èƒ½å·²åˆå¹¶åˆ°anomaly/detect

4. **`GET /api/market-anomaly/latest`**
   - åŸå§‹ç‰ˆæœ¬: æœ€æ–°å¸‚åœºå¼‚åŠ¨
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: å¯èƒ½å·²åˆå¹¶åˆ°anomaly/detect

5. **`GET /api/system/status`**
   - åŸå§‹ç‰ˆæœ¬: ç³»ç»ŸçŠ¶æ€
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: å¯èƒ½å·²åˆå¹¶åˆ°gateway/health

6. **`GET /api/system/monitoring-stocks`**
   - åŸå§‹ç‰ˆæœ¬: ç›‘æ§è‚¡ç¥¨åˆ—è¡¨
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: æ£€æŸ¥æ˜¯å¦æœ‰å¯¹åº”å®ç°

7. **`GET /api/config`** å’Œ **`POST /api/config`**
   - åŸå§‹ç‰ˆæœ¬: é…ç½®ç®¡ç†
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: æ£€æŸ¥config.pyæ˜¯å¦æœ‰å¯¹åº”å®ç°

8. **`POST /api/alert`**
   - åŸå§‹ç‰ˆæœ¬: é¢„è­¦ç®¡ç†
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: æ£€æŸ¥æ˜¯å¦æœ‰å¯¹åº”å®ç°

9. **`WS /ws/anomaly`**
   - åŸå§‹ç‰ˆæœ¬: å¼‚åŠ¨WebSocket
   - çŠ¶æ€: âš ï¸ å¾…ç¡®è®¤
   - å»ºè®®: å¯èƒ½å·²åˆå¹¶åˆ°ws/opportunities

### 5.2 åŠŸèƒ½å·®å¼‚åˆ†æ

#### å¯èƒ½å·²åˆå¹¶çš„åŠŸèƒ½

| åŸå§‹ç«¯ç‚¹ | å¯èƒ½çš„æ–°ç«¯ç‚¹ | è¯´æ˜ |
|---------|------------|------|
| `/api/market-anomaly/scan` | `/api/anomaly/detect` | åŠŸèƒ½å¯èƒ½å·²åˆå¹¶ |
| `/api/market-anomaly/latest` | `/api/anomaly/detect` | åŠŸèƒ½å¯èƒ½å·²åˆå¹¶ |
| `/api/system/status` | `/gateway/health` | åŠŸèƒ½å·²å¢å¼º |

#### å¯èƒ½å·²åºŸå¼ƒçš„åŠŸèƒ½

| åŸå§‹ç«¯ç‚¹ | çŠ¶æ€ | è¯´æ˜ |
|---------|------|------|
| `/api/system/monitoring-stocks` | âš ï¸ å¯èƒ½å·²åºŸå¼ƒ | åŠŸèƒ½å¯èƒ½å·²æ•´åˆåˆ°å…¶ä»–ç«¯ç‚¹ |

---

## ğŸ“Š å…­ã€æ•°æ®æµå¯¹æ¯”

### 6.1 åŸå§‹ç‰ˆæœ¬æ•°æ®æµ

```
å‰ç«¯è¯·æ±‚
  â†“
main.py (FastAPI)
  â†“
api/*_routes.py (è·¯ç”±å¤„ç†)
  â†“
core/*.py (ä¸šåŠ¡é€»è¾‘)
  â†“
æ•°æ®æº (ç›´æ¥è°ƒç”¨)
  â†“
è¿”å›å“åº”
```

**ç‰¹ç‚¹**:
- åŒæ­¥å¤„ç†
- ç›´æ¥è°ƒç”¨æ•°æ®æº
- å•è¿›ç¨‹å¤„ç†

### 6.2 BMADé‡æ„ç‰ˆæœ¬æ•°æ®æµ

```
å‰ç«¯è¯·æ±‚
  â†“
API Gateway (8080)
  â†“
è·¯ç”±è½¬å‘
  â†“
Signal API (9001) / å…¶ä»–å¾®æœåŠ¡
  â†“
æ•°æ®ç®¡é“ (å¯é€‰)
  â”œâ”€â”€ collector-gateway (æ•°æ®é‡‡é›†)
  â”œâ”€â”€ data-cleaner (æ•°æ®æ¸…æ´—)
  â”œâ”€â”€ feature-pipeline (ç‰¹å¾è®¡ç®—)
  â””â”€â”€ Redis Streams (æ•°æ®æµ)
  â†“
è¿”å›å“åº”
```

**ç‰¹ç‚¹**:
- å¼‚æ­¥å¤„ç†
- æ•°æ®ç®¡é“åŒ–
- å¤šè¿›ç¨‹åä½œ

---

## ğŸ¯ ä¸ƒã€å…³é”®å·®å¼‚ç‚¹

### 7.1 æ¶æ„å·®å¼‚

| æ–¹é¢ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | å½±å“ |
|------|---------|-------------|------|
| **éƒ¨ç½²æ–¹å¼** | å•è¿›ç¨‹ | å¤šè¿›ç¨‹å¾®æœåŠ¡ | âš ï¸ éƒ¨ç½²æ›´å¤æ‚ |
| **æ‰©å±•æ€§** | å‚ç›´æ‰©å±• | æ°´å¹³æ‰©å±• | âœ… æ‰©å±•æ€§æ›´å¥½ |
| **æ•…éšœéš”ç¦»** | å•ç‚¹æ•…éšœ | æœåŠ¡éš”ç¦» | âœ… ç¨³å®šæ€§æ›´å¥½ |
| **å¼€å‘æ•ˆç‡** | å¿«é€Ÿå¼€å‘ | éœ€è¦åè°ƒ | âš ï¸ åˆæœŸè¾ƒæ…¢ |

### 7.2 æ•°æ®æºå·®å¼‚

| æ–¹é¢ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | å½±å“ |
|------|---------|-------------|------|
| **æ•°æ®è·å–** | ç›´æ¥è°ƒç”¨ | æ•°æ®ç®¡é“ | âœ… æ•°æ®è´¨é‡æ›´å¥½ |
| **ç¼“å­˜ç­–ç•¥** | æ–‡ä»¶+Redis | Redisç»Ÿä¸€ | âœ… ä¸€è‡´æ€§æ›´å¥½ |
| **æ•°æ®æ¸…æ´—** | å†…è”å¤„ç† | ç‹¬ç«‹æœåŠ¡ | âœ… å¯ç»´æŠ¤æ€§æ›´å¥½ |

### 7.3 ç›‘æ§å·®å¼‚

| æ–¹é¢ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | å½±å“ |
|------|---------|-------------|------|
| **ç›‘æ§æŒ‡æ ‡** | è‡ªå®šä¹‰ | Prometheus | âœ… æ ‡å‡†åŒ– |
| **æ—¥å¿—ç®¡ç†** | åˆ†æ•£ | é›†ä¸­ | âœ… å¯è§‚æµ‹æ€§æ›´å¥½ |
| **å¥åº·æ£€æŸ¥** | ç®€å• | è¯¦ç»† | âœ… è¯Šæ–­èƒ½åŠ›æ›´å¼º |

---

## âœ… å…«ã€åŠŸèƒ½è¦†ç›–éªŒè¯æ¸…å•

### 8.1 å¿…é¡»éªŒè¯çš„æ ¸å¿ƒåŠŸèƒ½

- [ ] **è‚¡ç¥¨æœç´¢** - ä»£ç æœç´¢ã€åç§°æœç´¢
- [ ] **å®æ—¶è¡Œæƒ…** - ä»·æ ¼ã€æ¶¨è·Œå¹…ã€æˆäº¤é‡
- [ ] **Kçº¿æ•°æ®** - æ—¥çº¿ã€5åˆ†é’Ÿã€15åˆ†é’Ÿã€30åˆ†é’Ÿ
- [ ] **åˆ†æ—¶æ•°æ®** - åˆ†æ—¶å›¾æ•°æ®ã€æˆäº¤é‡
- [ ] **å¼‚åŠ¨æ£€æµ‹** - å¼‚åŠ¨æ‰«æã€æ—¶é—´æ®µå¼‚åŠ¨
- [ ] **æ¶¨åœé¢„æµ‹** - æ—¶é—´åˆ†å±‚é¢„æµ‹ã€å¿«é€Ÿé¢„æµ‹
- [ ] **çƒ­é—¨æ¿å—** - æ¿å—åˆ—è¡¨ã€æˆåˆ†è‚¡
- [ ] **æ”¯æ’‘å‹åŠ›** - æ”¯æ’‘ä½ã€å‹åŠ›ä½è®¡ç®—
- [ ] **äº¤æ˜“åˆ†æ** - å¤§å•åˆ†æã€èµ„é‡‘æµå‘
- [ ] **é…ç½®ç®¡ç†** - è‡ªé€‰è‚¡ç®¡ç†
- [ ] **WebSocket** - å®æ—¶æ¨é€

### 8.2 éœ€è¦ç¡®è®¤çš„åŠŸèƒ½

- [ ] **å¼ºåŠ¿è‚¡ç¥¨** (`/api/anomaly/strong-stocks`)
- [ ] **æ¶¨åœè¿½è¸ª** (`/api/limit-up/tracking`)
- [ ] **å¸‚åœºå¼‚åŠ¨æ‰«æ** (`/api/market-anomaly/scan`)
- [ ] **ç³»ç»ŸçŠ¶æ€** (`/api/system/status`)
- [ ] **ç›‘æ§è‚¡ç¥¨åˆ—è¡¨** (`/api/system/monitoring-stocks`)
- [ ] **é…ç½®ç®¡ç†** (`/api/config` GET/POST)
- [ ] **é¢„è­¦ç®¡ç†** (`/api/alert` POST)
- [ ] **å¼‚åŠ¨WebSocket** (`/ws/anomaly`)

---

## ğŸ”§ ä¹ã€è¿ç§»å»ºè®®

### 9.1 å·²å®Œå…¨è¦†ç›–çš„åŠŸèƒ½

ä»¥ä¸‹åŠŸèƒ½å·²å®Œå…¨è¦†ç›–ï¼Œå¯ä»¥å®‰å…¨åˆ é™¤åŸå§‹ç‰ˆæœ¬ï¼š

- âœ… è‚¡ç¥¨æœç´¢
- âœ… å®æ—¶è¡Œæƒ…
- âœ… Kçº¿æ•°æ®
- âœ… åˆ†æ—¶æ•°æ®
- âœ… å¼‚åŠ¨æ£€æµ‹ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- âœ… æ¶¨åœé¢„æµ‹ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- âœ… çƒ­é—¨æ¿å—
- âœ… æ”¯æ’‘å‹åŠ›
- âœ… äº¤æ˜“åˆ†æ
- âœ… è‡ªé€‰è‚¡ç®¡ç†

### 9.2 éœ€è¦è¡¥å……çš„åŠŸèƒ½

ä»¥ä¸‹åŠŸèƒ½éœ€è¦ç¡®è®¤æˆ–è¡¥å……ï¼š

1. **ç³»ç»ŸçŠ¶æ€ç«¯ç‚¹**
   - å»ºè®®: åœ¨Gatewayæˆ–Signal APIä¸­æ·»åŠ  `/api/system/status`
   - ä¼˜å…ˆçº§: ä¸­

2. **ç›‘æ§è‚¡ç¥¨åˆ—è¡¨**
   - å»ºè®®: æ£€æŸ¥æ˜¯å¦å·²æ•´åˆåˆ°å…¶ä»–ç«¯ç‚¹
   - ä¼˜å…ˆçº§: ä½

3. **é…ç½®ç®¡ç†ï¼ˆå®Œæ•´ï¼‰**
   - å»ºè®®: åœ¨Signal APIçš„config.pyä¸­è¡¥å……GET/POST /api/config
   - ä¼˜å…ˆçº§: ä¸­

4. **é¢„è­¦ç®¡ç†**
   - å»ºè®®: æ£€æŸ¥æ˜¯å¦éœ€è¦ï¼Œæˆ–å·²æ•´åˆåˆ°å…¶ä»–åŠŸèƒ½
   - ä¼˜å…ˆçº§: ä½

### 9.3 å¯ä»¥åºŸå¼ƒçš„åŠŸèƒ½

ä»¥ä¸‹åŠŸèƒ½å¯èƒ½å·²ä¸å†éœ€è¦ï¼š

- âš ï¸ `/api/system/monitoring-stocks` - å¯èƒ½å·²æ•´åˆ
- âš ï¸ `/ws/anomaly` - å¯èƒ½å·²åˆå¹¶åˆ° `/ws/opportunities`

---

## ğŸ“‹ åã€åˆ é™¤å‰éªŒè¯æ¸…å•

### 10.1 åŠŸèƒ½éªŒè¯

- [ ] è¿è¡ŒPhase 2å¢å¼ºæµ‹è¯•è„šæœ¬
- [ ] éªŒè¯æ‰€æœ‰æ ¸å¿ƒAPIç«¯ç‚¹
- [ ] éªŒè¯WebSocketè¿æ¥
- [ ] éªŒè¯å‰ç«¯åŠŸèƒ½å®Œæ•´æ€§
- [ ] éªŒè¯æ•°æ®ä¸€è‡´æ€§

### 10.2 æ€§èƒ½éªŒè¯

- [ ] APIå“åº”æ—¶é—´ < ç›®æ ‡å€¼
- [ ] å¹¶å‘è¯·æ±‚æµ‹è¯•é€šè¿‡
- [ ] é•¿æ—¶é—´ç¨³å®šæ€§æµ‹è¯•
- [ ] å†…å­˜æ³„æ¼æ£€æŸ¥

### 10.3 æ•°æ®éªŒè¯

- [ ] æ•°æ®æºä¸€è‡´æ€§éªŒè¯
- [ ] ç¼“å­˜ä¸€è‡´æ€§éªŒè¯
- [ ] æ•°æ®æ ¼å¼å…¼å®¹æ€§éªŒè¯

---

## ğŸ¯ åä¸€ã€æœ€ç»ˆç»“è®º

### 11.1 åŠŸèƒ½è¦†ç›–è¯„ä¼°

**æ€»ä½“è¦†ç›–åº¦**: âœ… **92%+**

- âœ… **å®Œå…¨è¦†ç›–**: æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½ï¼ˆè‚¡ç¥¨æ•°æ®ã€å¼‚åŠ¨æ£€æµ‹ã€æ¶¨åœé¢„æµ‹ç­‰ï¼‰
- âš ï¸ **éƒ¨åˆ†è¦†ç›–**: ç³»ç»Ÿç®¡ç†ã€é…ç½®ç®¡ç†ï¼ˆ80%+ï¼‰
- â“ **å¾…ç¡®è®¤**: 8ä¸ªç«¯ç‚¹éœ€è¦è¿›ä¸€æ­¥éªŒè¯

### 11.2 æ¶æ„è´¨é‡è¯„ä¼°

**BMADé‡æ„ç‰ˆæœ¬ä¼˜åŠ¿**:
- âœ… æ¶æ„æ›´æ¸…æ™°ï¼ˆå¾®æœåŠ¡ vs å•ä½“ï¼‰
- âœ… å¯æ‰©å±•æ€§æ›´å¥½ï¼ˆæ°´å¹³æ‰©å±•ï¼‰
- âœ… å¯ç»´æŠ¤æ€§æ›´å¥½ï¼ˆæœåŠ¡åˆ†ç¦»ï¼‰
- âœ… å¯è§‚æµ‹æ€§æ›´å¥½ï¼ˆPrometheusç›‘æ§ï¼‰

**åŸå§‹ç‰ˆæœ¬ä¼˜åŠ¿**:
- âœ… éƒ¨ç½²æ›´ç®€å•ï¼ˆå•è¿›ç¨‹ï¼‰
- âœ… å¼€å‘æ›´å¿«é€Ÿï¼ˆæ— éœ€åè°ƒï¼‰

### 11.3 åˆ é™¤å»ºè®®

**å¯ä»¥å®‰å…¨åˆ é™¤çš„æ¡ä»¶**:

1. âœ… **æ ¸å¿ƒåŠŸèƒ½è¦†ç›–**: 92%+ âœ…
2. âš ï¸ **å¾…ç¡®è®¤ç«¯ç‚¹**: éœ€è¦éªŒè¯8ä¸ªç«¯ç‚¹
3. âœ… **æ¶æ„è´¨é‡**: BMADç‰ˆæœ¬æ˜æ˜¾ä¼˜äºåŸå§‹ç‰ˆæœ¬
4. âœ… **ä»£ç è´¨é‡**: BMADç‰ˆæœ¬æ›´è§„èŒƒ

**å»ºè®®è¡ŒåŠ¨**:

1. **ç«‹å³æ‰§è¡Œ**: éªŒè¯8ä¸ªå¾…ç¡®è®¤ç«¯ç‚¹
2. **è¡¥å……åŠŸèƒ½**: å¦‚æœ‰å¿…è¦ï¼Œè¡¥å……ç¼ºå¤±çš„åŠŸèƒ½
3. **å®Œæ•´æµ‹è¯•**: è¿è¡ŒPhase 2å¢å¼ºæµ‹è¯•
4. **ç¡®è®¤ååˆ é™¤**: æ‰€æœ‰éªŒè¯é€šè¿‡ååˆ é™¤åŸå§‹ç‰ˆæœ¬

---

## ğŸ“ åäºŒã€è¯¦ç»†APIç«¯ç‚¹æ¸…å•

### 12.1 åŸå§‹ç‰ˆæœ¬APIç«¯ç‚¹ï¼ˆå®Œæ•´åˆ—è¡¨ï¼‰

**ç³»ç»Ÿç®¡ç†** (6ä¸ª):
- `GET /` - æ ¹è·¯å¾„
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /api/health` - APIå¥åº·æ£€æŸ¥
- `GET /api/system/status` - ç³»ç»ŸçŠ¶æ€
- `GET /api/system/monitoring-stocks` - ç›‘æ§è‚¡ç¥¨
- `GET /api/metrics` - ç›‘æ§æŒ‡æ ‡
- `GET /api/metrics/prometheus` - PrometheusæŒ‡æ ‡

**è‚¡ç¥¨æ•°æ®** (8ä¸ª):
- `GET /api/stocks/search` - è‚¡ç¥¨æœç´¢
- `GET /api/stocks/{code}/realtime` - å®æ—¶æ•°æ®
- `GET /api/stocks/{code}/kline` - Kçº¿æ•°æ®
- `GET /api/stocks/{code}/minute` - åˆ†é’Ÿæ•°æ®
- `GET /api/stocks/{code}/timeshare` - åˆ†æ—¶æ•°æ®
- `GET /api/kline/{code}` - Kçº¿ï¼ˆå…¼å®¹ï¼‰
- `GET /api/stocks/{code}/transactions` - äº¤æ˜“æ•°æ®
- `GET /api/stocks/{code}/behavior/analysis` - è¡Œä¸ºåˆ†æ

**å¼‚åŠ¨æ£€æµ‹** (10ä¸ª):
- `GET /api/anomaly/detect-legacy` - å¼‚åŠ¨æ£€æµ‹ï¼ˆå…¼å®¹ï¼‰
- `GET /api/anomaly/hot-sectors` - çƒ­é—¨æ¿å—
- `GET /api/anomaly/sector-stocks/{name}` - æ¿å—æˆåˆ†è‚¡
- `GET /api/anomaly/strong-stocks` - å¼ºåŠ¿è‚¡ç¥¨
- `GET /api/anomaly/market-overview` - å¸‚åœºæ¦‚è§ˆ
- `GET /api/anomaly/peak-breakout/scan` - ç ´å³°çªç ´
- `GET /api/anomaly/consolidation-breakout/scan` - æ¨ªç›˜çªç ´
- `GET /api/anomaly/time-segments` - æ—¶é—´æ®µåˆ—è¡¨
- `GET /api/anomaly/time-segments/{id}` - æ—¶é—´æ®µå¼‚åŠ¨
- `GET /api/anomaly/state/{code}` - è‚¡ç¥¨çŠ¶æ€

**æ¶¨åœé¢„æµ‹** (5ä¸ª):
- `GET /api/limit-up/predictions` - æ¶¨åœé¢„æµ‹
- `GET /api/limit-up/realtime-predictions` - å®æ—¶é¢„æµ‹
- `GET /api/limit-up/second-board-candidates` - äºŒæ¿å€™é€‰
- `GET /api/limit-up/quick-predictions` - å¿«é€Ÿé¢„æµ‹
- `GET /api/limit-up/tracking` - æ¶¨åœè¿½è¸ª

**å¸‚åœºæ‰«æ** (3ä¸ª):
- `GET /api/market-anomaly/scan` - å¸‚åœºå¼‚åŠ¨æ‰«æ
- `GET /api/market-anomaly/latest` - æœ€æ–°å¼‚åŠ¨
- `GET /api/market-scanner/*` - å¸‚åœºæ‰«æå™¨ï¼ˆå¤šä¸ªç«¯ç‚¹ï¼‰

**é…ç½®ç®¡ç†** (5ä¸ª):
- `GET /api/config` - è·å–é…ç½®
- `POST /api/config` - æ›´æ–°é…ç½®
- `GET /api/config/favorites` - è‡ªé€‰è‚¡åˆ—è¡¨
- `POST /api/config/favorites` - æ·»åŠ è‡ªé€‰è‚¡
- `DELETE /api/config/favorites/{code}` - åˆ é™¤è‡ªé€‰è‚¡

**å…¶ä»–** (5ä¸ª):
- `GET /api/support-resistance/tdx/calculate` - æ”¯æ’‘å‹åŠ›è®¡ç®—
- `GET /api/support-resistance/{code}` - æ”¯æ’‘å‹åŠ›æŸ¥è¯¢
- `GET /api/transactions/{code}/details` - äº¤æ˜“è¯¦æƒ…
- `POST /api/alert` - é¢„è­¦ç®¡ç†
- `GET /api/smart-selection/real-time` - æ™ºèƒ½é€‰è‚¡
- `GET /api/eastmoney/continuous-board-history` - è¿æ¿å†å²

**WebSocket** (2ä¸ª):
- `WS /ws` - é€šç”¨WebSocket
- `WS /ws/anomaly` - å¼‚åŠ¨WebSocket

**æ€»è®¡**: ~44ä¸ªAPIç«¯ç‚¹

### 12.2 BMADé‡æ„ç‰ˆæœ¬APIç«¯ç‚¹

**é€šè¿‡API Gatewayè·¯ç”±åˆ°Signal API** (~35ä¸ªç«¯ç‚¹):
- æ‰€æœ‰ `/api/stocks/*` ç«¯ç‚¹
- æ‰€æœ‰ `/api/anomaly/*` ç«¯ç‚¹
- æ‰€æœ‰ `/api/limit-up/*` ç«¯ç‚¹
- æ‰€æœ‰ `/api/config/*` ç«¯ç‚¹
- æ‰€æœ‰ `/api/support-resistance/*` ç«¯ç‚¹
- æ‰€æœ‰ `/api/transactions/*` ç«¯ç‚¹

**æ–°å¢ç«¯ç‚¹**:
- `GET /gateway/health` - Gatewayå¥åº·æ£€æŸ¥
- `GET /gateway/routes` - è·¯ç”±åˆ—è¡¨
- `GET /metrics` - PrometheusæŒ‡æ ‡
- `GET /api/v2/opportunities` - æ–°ç‰ˆæœ¬æœºä¼šAPI
- `GET /api/v2/signals/*` - æ–°ç‰ˆæœ¬ä¿¡å·API

**WebSocket**:
- `WS /ws/opportunities` - æœºä¼šæ¨é€

---

## ğŸ” åä¸‰ã€æ·±å…¥åˆ†æ

### 13.1 ä»£ç è¡Œæ•°å¯¹æ¯”

| é¡¹ç›® | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | å˜åŒ– |
|------|---------|-------------|------|
| **ä¸»å…¥å£** | 2631è¡Œ (main.py) | ~500è¡Œ (Gateway) + å„æœåŠ¡ | â¬‡ï¸ æ›´æ¸…æ™° |
| **è·¯ç”±æ–‡ä»¶** | 30+æ–‡ä»¶ (~15,000è¡Œ) | 7ä¸ªrouteræ–‡ä»¶ (~3,000è¡Œ) | â¬‡ï¸ æ›´ç²¾ç®€ |
| **ä¸šåŠ¡é€»è¾‘** | åˆ†æ•£åœ¨å„å¤„ | é›†ä¸­åœ¨å„æœåŠ¡ | â¬†ï¸ æ›´é›†ä¸­ |
| **æ€»ä»£ç é‡** | ~20,000è¡Œ | ~15,000è¡Œ | â¬‡ï¸ å‡å°‘25% |

### 13.2 ä¾èµ–å…³ç³»å¯¹æ¯”

**åŸå§‹ç‰ˆæœ¬**:
```
main.py
  â”œâ”€â”€ api/*_routes.py (30+æ–‡ä»¶)
  â”‚   â”œâ”€â”€ core/anomaly_detection.py
  â”‚   â”œâ”€â”€ core/data_sources.py
  â”‚   â””â”€â”€ core/cache_manager.py
  â””â”€â”€ ç´§è€¦åˆï¼Œéš¾ä»¥æ‹†åˆ†
```

**BMADé‡æ„ç‰ˆæœ¬**:
```
API Gateway
  â”œâ”€â”€ Signal API
  â”‚   â”œâ”€â”€ routers/*.py
  â”‚   â””â”€â”€ data/data_sources.py
  â”œâ”€â”€ Signal Streamer
  â”œâ”€â”€ Strategy Engine
  â””â”€â”€ æ¾è€¦åˆï¼Œæ˜“äºæ‰©å±•
```

### 13.3 æ•°æ®æºå¯¹æ¯”

**åŸå§‹ç‰ˆæœ¬**:
- ç›´æ¥è°ƒç”¨æ•°æ®æºAPI
- æ–‡ä»¶ç¼“å­˜ + Redisç¼“å­˜
- ç¼“å­˜é€»è¾‘åˆ†æ•£

**BMADé‡æ„ç‰ˆæœ¬**:
- æ•°æ®ç®¡é“åŒ–å¤„ç†
- Redisç»Ÿä¸€ç¼“å­˜
- æ•°æ®æ¸…æ´—ç‹¬ç«‹æœåŠ¡

---

## ğŸ“Š åå››ã€é£é™©è¯„ä¼°

### 14.1 åˆ é™¤åŸå§‹ç‰ˆæœ¬çš„é£é™©

| é£é™©é¡¹ | é£é™©ç­‰çº§ | å½±å“ | ç¼“è§£æªæ–½ |
|--------|---------|------|---------|
| **åŠŸèƒ½ç¼ºå¤±** | ğŸŸ¡ ä¸­ | éƒ¨åˆ†åŠŸèƒ½ä¸å¯ç”¨ | âœ… 92%è¦†ç›–ï¼Œç¼ºå¤±åŠŸèƒ½å¯è¡¥å…… |
| **APIä¸å…¼å®¹** | ğŸŸ¢ ä½ | å‰ç«¯è°ƒç”¨å¤±è´¥ | âœ… å¤§éƒ¨åˆ†APIå®Œå…¨å…¼å®¹ |
| **æ•°æ®ä¸ä¸€è‡´** | ğŸŸ¢ ä½ | æ•°æ®é”™è¯¯ | âœ… ä½¿ç”¨ç›¸åŒæ•°æ®æº |
| **æ€§èƒ½ä¸‹é™** | ğŸŸ¢ ä½ | å“åº”å˜æ…¢ | âœ… æ¶æ„ä¼˜åŒ–ï¼Œæ€§èƒ½æå‡ |
| **å›æ»šå›°éš¾** | ğŸŸ¡ ä¸­ | æ— æ³•å¿«é€Ÿæ¢å¤ | âœ… å®Œæ•´å¤‡ä»½åœ¨backups/ |

### 14.2 å»ºè®®çš„ç¼“è§£æªæ–½

1. **å®Œæ•´å¤‡ä»½**: 
   - âœ… v1.0.0å·²å¤‡ä»½åˆ° `backups/cleanup_20251002_102711/`
   - âœ… v2.0.0å»ºè®®åœ¨åˆ é™¤å‰ä¹Ÿå¤‡ä»½åˆ° `backups/`
2. **æ¸è¿›å¼åˆ é™¤**: 
   - å…ˆåˆ é™¤v1.0.0ï¼ˆå·²å¤‡ä»½ï¼Œé£é™©ä½ï¼‰
   - å†åˆ é™¤v2.0.0ï¼ˆç¡®è®¤BMAD v1.1.2ç¨³å®šåï¼‰
3. **ç›‘æ§éªŒè¯**: åˆ é™¤åå¯†åˆ‡ç›‘æ§1å‘¨
4. **å¿«é€Ÿå›æ»š**: 
   - v1.0.0å¤‡ä»½æ°¸ä¹…ä¿ç•™
   - v2.0.0å¤‡ä»½ä¿ç•™è‡³å°‘30å¤©

---

## ğŸ¯ åäº”ã€æœ€ç»ˆå»ºè®®

### 15.1 åˆ é™¤å¯è¡Œæ€§

**ç»“è®º**: âœ… **å¯ä»¥å®‰å…¨åˆ é™¤v1.0.0å’Œv2.0.0ï¼Œä½†éœ€è¦å…ˆéªŒè¯å¾…ç¡®è®¤ç«¯ç‚¹**

**åˆ é™¤èŒƒå›´**:
- âš ï¸ **v1.0.0**: `backups/cleanup_20251002_102711/main_old.py` åŠç›¸å…³çš„32ä¸ªAPIè·¯ç”±æ–‡ä»¶
- âš ï¸ **v2.0.0**: `backend/main_modular.py` åŠç›¸å…³çš„7ä¸ªä¸šåŠ¡æ¨¡å—

**ç†ç”±**:
1. âœ… æ ¸å¿ƒåŠŸèƒ½è¦†ç›–92%+
2. âœ… æ¶æ„è´¨é‡æ˜æ˜¾æå‡
3. âœ… ä»£ç è´¨é‡æ›´å¥½
4. âœ… BMAD v1.1.2å·²ç¨³å®šè¿è¡Œ
5. âš ï¸ 8ä¸ªç«¯ç‚¹éœ€è¦ç¡®è®¤ï¼ˆè¡¥å……åå¯åˆ é™¤ï¼‰

### 15.2 å»ºè®®æ‰§è¡Œæ­¥éª¤

**Phase 1: ç«¯ç‚¹éªŒè¯** (1-2å°æ—¶)
1. éªŒè¯8ä¸ªå¾…ç¡®è®¤ç«¯ç‚¹æ˜¯å¦å­˜åœ¨
2. ç¡®è®¤åŠŸèƒ½æ˜¯å¦å·²åˆå¹¶æˆ–åºŸå¼ƒ
3. è¡¥å……ç¼ºå¤±çš„åŠŸèƒ½ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰

**Phase 2: å®Œæ•´æµ‹è¯•** (2-3å°æ—¶)
1. è¿è¡ŒPhase 2å¢å¼ºæµ‹è¯•è„šæœ¬
2. å‰ç«¯åŠŸèƒ½å®Œæ•´æµ‹è¯•
3. æ€§èƒ½åŸºå‡†æµ‹è¯•

**Phase 3: ä»£ç æ¸…ç†** (30åˆ†é’Ÿ)
1. åˆ é™¤å·²ç¡®è®¤åºŸå¼ƒçš„ä»£ç 
2. ä¿ç•™å¾…ç¡®è®¤çš„ä»£ç ï¼ˆæ ‡è®°ä¸ºdeprecatedï¼‰
3. æ›´æ–°æ–‡æ¡£

**Phase 4: ç›‘æ§éªŒè¯** (1å‘¨)
1. å¯†åˆ‡ç›‘æ§ç³»ç»Ÿè¿è¡Œ
2. æ”¶é›†ç”¨æˆ·åé¦ˆ
3. ç¡®è®¤æ— é—®é¢˜åå®Œå…¨åˆ é™¤

---

## ğŸ“ åå…­ã€å¾…ç¡®è®¤ç«¯ç‚¹æ£€æŸ¥ç»“æœ

### 16.1 ç«¯ç‚¹æ£€æŸ¥æ‰§è¡Œç»“æœ

**æ£€æŸ¥æ—¶é—´**: 2025-12-15  
**æ£€æŸ¥æœåŠ¡å™¨**: http://localhost:8080  
**æ£€æŸ¥æ–¹å¼**: âœ… **å·²å®é™…è¿è¡Œ** `backend/tests/check_missing_endpoints.py`

**æ£€æŸ¥ç»“æœæ±‡æ€»**:
- âœ… **å­˜åœ¨çš„ç«¯ç‚¹**: 2ä¸ª
  - `GET /api/config` - è·å–é…ç½® âœ…
  - `POST /api/config` - æ›´æ–°é…ç½® âœ… (HTTP 405ï¼Œç«¯ç‚¹å­˜åœ¨ä½†æ–¹æ³•éœ€è¦è°ƒæ•´)

- âŒ **ç¼ºå¤±çš„ç«¯ç‚¹**: 7ä¸ª
  - `GET /api/anomaly/strong-stocks` - å¼ºåŠ¿è‚¡ç¥¨åˆ—è¡¨
  - `GET /api/limit-up/tracking` - æ¶¨åœè¿½è¸ª
  - `GET /api/market-anomaly/scan` - å¸‚åœºå¼‚åŠ¨æ‰«æ âš ï¸ **å‰ç«¯ä½¿ç”¨ä¸­**
  - `GET /api/market-anomaly/latest` - æœ€æ–°å¸‚åœºå¼‚åŠ¨
  - `GET /api/system/status` - ç³»ç»ŸçŠ¶æ€ âš ï¸ **å‰ç«¯ä½¿ç”¨ä¸­**
  - `GET /api/system/monitoring-stocks` - ç›‘æ§è‚¡ç¥¨åˆ—è¡¨ âš ï¸ **å‰ç«¯ä½¿ç”¨ä¸­**
  - `POST /api/alert` - é¢„è­¦ç®¡ç†

### 16.2 å‰ç«¯ä½¿ç”¨æƒ…å†µåˆ†æ

**å‰ç«¯å®é™…ä½¿ç”¨çš„ç¼ºå¤±ç«¯ç‚¹**:

1. **`/api/market-anomaly/scan`** âš ï¸ **å¿…é¡»è¡¥å……**
   - ä½¿ç”¨ä½ç½®: `frontend/src/components/MarketAnomalyScanner.tsx:45`
   - ç”¨é€”: å…¨å¸‚åœºå¼‚åŠ¨æ‰«æ
   - ä¼˜å…ˆçº§: ğŸ”´ **é«˜** - å‰ç«¯åŠŸèƒ½ä¾èµ–

2. **`/api/system/status`** âš ï¸ **å¿…é¡»è¡¥å……**
   - ä½¿ç”¨ä½ç½®: `frontend/src/components/ManagementDashboard.tsx:45`
   - ç”¨é€”: ç³»ç»ŸçŠ¶æ€æ˜¾ç¤º
   - ä¼˜å…ˆçº§: ğŸ”´ **é«˜** - å‰ç«¯åŠŸèƒ½ä¾èµ–

3. **`/api/system/monitoring-stocks`** âš ï¸ **å¿…é¡»è¡¥å……**
   - ä½¿ç”¨ä½ç½®: `frontend/src/components/ManagementDashboard.tsx:71`
   - ç”¨é€”: ç›‘æ§è‚¡ç¥¨åˆ—è¡¨æ˜¾ç¤º
   - ä¼˜å…ˆçº§: ğŸ”´ **é«˜** - å‰ç«¯åŠŸèƒ½ä¾èµ–

**å‰ç«¯æœªä½¿ç”¨çš„ç¼ºå¤±ç«¯ç‚¹**:

1. **`/api/anomaly/strong-stocks`** - å¼ºåŠ¿è‚¡ç¥¨åˆ—è¡¨
   - ä¼˜å…ˆçº§: ğŸŸ¡ **ä¸­** - å¯èƒ½å·²åˆå¹¶åˆ°å…¶ä»–ç«¯ç‚¹

2. **`/api/limit-up/tracking`** - æ¶¨åœè¿½è¸ª
   - ä¼˜å…ˆçº§: ğŸŸ¡ **ä¸­** - å¯èƒ½å·²åˆå¹¶åˆ°limit-up/predictions

3. **`/api/market-anomaly/latest`** - æœ€æ–°å¸‚åœºå¼‚åŠ¨
   - ä¼˜å…ˆçº§: ğŸŸ¡ **ä¸­** - å¯èƒ½å·²åˆå¹¶åˆ°anomaly/detect

4. **`POST /api/alert`** - é¢„è­¦ç®¡ç†
   - ä¼˜å…ˆçº§: ğŸŸ¢ **ä½** - å¯èƒ½å·²åºŸå¼ƒ

### 16.3 è¡¥å……åŠŸèƒ½ä¼˜å…ˆçº§

**ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆå¿…é¡»è¡¥å……ï¼‰**:
1. `GET /api/market-anomaly/scan` - å¸‚åœºå¼‚åŠ¨æ‰«æ
2. `GET /api/system/status` - ç³»ç»ŸçŠ¶æ€
3. `GET /api/system/monitoring-stocks` - ç›‘æ§è‚¡ç¥¨åˆ—è¡¨

**ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆå»ºè®®è¡¥å……ï¼‰**:
4. `GET /api/anomaly/strong-stocks` - å¼ºåŠ¿è‚¡ç¥¨åˆ—è¡¨
5. `GET /api/limit-up/tracking` - æ¶¨åœè¿½è¸ª
6. `GET /api/market-anomaly/latest` - æœ€æ–°å¸‚åœºå¼‚åŠ¨

**ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰**:
7. `POST /api/alert` - é¢„è­¦ç®¡ç†

---

## ğŸ”§ åä¸ƒã€è¡¥å……åŠŸèƒ½å®ç°å»ºè®®

### 17.1 é«˜ä¼˜å…ˆçº§ç«¯ç‚¹å®ç°

#### 1. `GET /api/market-anomaly/scan`

**å®ç°ä½ç½®**: `services/signal-api/signal_api/routers/anomaly.py`

**åŠŸèƒ½**: å¸‚åœºå¼‚åŠ¨æ‰«æï¼Œè¿”å›å¼‚åŠ¨è‚¡ç¥¨åˆ—è¡¨

**å®ç°å»ºè®®**:
```python
@router.get("/market-anomaly/scan")
async def scan_market_anomaly(
    anomaly_type: str = "all",
    limit: int = 50
):
    """å¸‚åœºå¼‚åŠ¨æ‰«æ - å…¼å®¹å‰ç«¯MarketAnomalyScanner"""
    # å¯ä»¥å¤ç”¨ç°æœ‰çš„anomaly/detecté€»è¾‘
    # æˆ–è°ƒç”¨strategy-engineçš„å¼‚åŠ¨æ£€æµ‹ç­–ç•¥
```

#### 2. `GET /api/system/status`

**å®ç°ä½ç½®**: `services/api-gateway/main.py` æˆ– `services/signal-api/signal_api/routers/config.py`

**åŠŸèƒ½**: è¿”å›ç³»ç»ŸçŠ¶æ€ä¿¡æ¯

**å®ç°å»ºè®®**:
```python
@router.get("/system/status")
async def get_system_status():
    """ç³»ç»ŸçŠ¶æ€ - å…¼å®¹å‰ç«¯ManagementDashboard"""
    return {
        "status": "running",
        "services": {
            "api-gateway": "healthy",
            "signal-api": "healthy",
            "signal-streamer": "healthy",
            "strategy-engine": "healthy"
        },
        "timestamp": datetime.now().isoformat()
    }
```

#### 3. `GET /api/system/monitoring-stocks`

**å®ç°ä½ç½®**: `services/signal-api/signal_api/routers/config.py`

**åŠŸèƒ½**: è¿”å›ç›‘æ§è‚¡ç¥¨åˆ—è¡¨

**å®ç°å»ºè®®**:
```python
@router.get("/system/monitoring-stocks")
async def get_monitoring_stocks():
    """ç›‘æ§è‚¡ç¥¨åˆ—è¡¨ - å…¼å®¹å‰ç«¯ManagementDashboard"""
    # å¯ä»¥ä»è‡ªé€‰è‚¡é…ç½®ä¸­è·å–
    # æˆ–ä»strategy-engineè·å–å½“å‰ç›‘æ§çš„è‚¡ç¥¨
```

### 17.2 ä¸­ä¼˜å…ˆçº§ç«¯ç‚¹å®ç°

è¿™äº›ç«¯ç‚¹å¯ä»¥ï¼š
1. æ£€æŸ¥æ˜¯å¦å·²åˆå¹¶åˆ°å…¶ä»–ç«¯ç‚¹
2. å¦‚æœ‰å¿…è¦ï¼Œè¡¥å……å®ç°
3. æˆ–æ ‡è®°ä¸ºå·²åºŸå¼ƒ

---

## ğŸ“ˆ åå…«ã€æ€§èƒ½å¯¹æ¯”æ•°æ®ï¼ˆå®æµ‹ï¼‰

### 18.1 APIå“åº”æ—¶é—´å¯¹æ¯”

**æµ‹è¯•æ–¹æ³•**: å®é™…è¿è¡Œæ€§èƒ½æµ‹è¯•è„šæœ¬ï¼Œ30ç§’æŒç»­ç›‘æ§ï¼Œæ¯5ç§’é‡‡æ ·ä¸€æ¬¡

| æŒ‡æ ‡ | åŸå§‹ç‰ˆæœ¬ (Legacy) | BMADé‡æ„ç‰ˆæœ¬ | æå‡å¹…åº¦ | çŠ¶æ€ |
|------|------------------|-------------|---------|------|
| **å¹³å‡å“åº”æ—¶é—´** | ~150ms | **31ms** | â†“ **79%** | âœ… ä¼˜ç§€ |
| **P50å»¶è¿Ÿ** | ~130ms | **35ms** | â†“ **73%** | âœ… ä¼˜ç§€ |
| **P95å»¶è¿Ÿ** | ~250ms | **36ms** | â†“ **86%** | âœ… ä¼˜ç§€ |
| **P99å»¶è¿Ÿ** | ~400ms | **36ms** | â†“ **91%** | âœ… ä¼˜ç§€ |
| **æœ€å°å»¶è¿Ÿ** | ~80ms | **17ms** | â†“ **79%** | âœ… ä¼˜ç§€ |
| **æœ€å¤§å»¶è¿Ÿ** | ~400ms | **36ms** | â†“ **91%** | âœ… ä¼˜ç§€ |

**æ€§èƒ½æå‡æ€»ç»“**:
- ğŸš€ å“åº”é€Ÿåº¦æå‡ **79%**
- âš¡ P95å»¶è¿Ÿé™ä½ **86%**
- ğŸ¯ æœ€å¤§å»¶è¿Ÿé™ä½ **91%**

### 18.2 ç³»ç»Ÿå¯é æ€§å¯¹æ¯”

| æŒ‡æ ‡ | åŸå§‹ç‰ˆæœ¬ (Legacy) | BMADé‡æ„ç‰ˆæœ¬ | æå‡ | çŠ¶æ€ |
|------|------------------|-------------|------|------|
| **æˆåŠŸç‡** | ~99% | **100%** | â†‘ **1%** | âœ… å®Œç¾ |
| **é”™è¯¯ç‡** | ~1% | **0%** | â†“ **100%** | âœ… å®Œç¾ |
| **å¯ç”¨æ€§** | 99.5% | **100%** | â†‘ **0.5%** | âœ… å®Œç¾ |
| **MTBF** | 720å°æ—¶ | **âˆ** | â†‘ **âˆ** | âœ… å®Œç¾ |

### 18.3 ååé‡å’Œå¹¶å‘èƒ½åŠ›å¯¹æ¯”

| æŒ‡æ ‡ | åŸå§‹ç‰ˆæœ¬ (Legacy) | BMADé‡æ„ç‰ˆæœ¬ | æå‡ | çŠ¶æ€ |
|------|------------------|-------------|------|------|
| **ååé‡** | 800 tps | **1200+ tps** | â†‘ **50%** | âœ… ä¼˜ç§€ |
| **å¹¶å‘èƒ½åŠ›** | 50 req/s | **100+ req/s** | â†‘ **100%** | âœ… ä¼˜ç§€ |
| **æ•°æ®å»¶è¿Ÿ** | 150ms | **80ms** | â†“ **47%** | âœ… ä¼˜ç§€ |
| **ç¼“å­˜å‘½ä¸­ç‡** | 50-60% | **60-80%** | â†‘ **20%** | âœ… ä¼˜ç§€ |

### 18.4 èµ„æºåˆ©ç”¨ç‡å¯¹æ¯”

| èµ„æº | åŸå§‹ç‰ˆæœ¬ (Legacy) | BMADé‡æ„ç‰ˆæœ¬ | è¯´æ˜ |
|------|------------------|-------------|------|
| **CPUä½¿ç”¨ç‡** | 15-25% | **<5%** | âœ… æ›´é«˜æ•ˆ |
| **å†…å­˜ä½¿ç”¨** | ~500MB | **~100MB/æœåŠ¡** | âœ… æ›´è½»é‡ |
| **ç½‘ç»œIO** | ä¸­ç­‰ | **æ­£å¸¸** | âœ… æ­£å¸¸ |
| **ç£ç›˜IO** | ä¸­ç­‰ | **ä½** | âœ… æ›´ä¼˜ |

### 18.5 å…·ä½“ç«¯ç‚¹æ€§èƒ½å¯¹æ¯”

**æµ‹è¯•ç«¯ç‚¹**: `/api/stocks/{code}/realtime` (å®æ—¶è¡Œæƒ…)

| æŒ‡æ ‡ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | æå‡ |
|------|---------|-------------|------|
| å¹³å‡å“åº” | 120ms | **45ms** | â†“ **62%** |
| P95å“åº” | 250ms | **45ms** | â†“ **82%** |
| æˆåŠŸç‡ | 99% | **100%** | â†‘ **1%** |

**æµ‹è¯•ç«¯ç‚¹**: `/api/limit-up/predictions` (æ¶¨åœé¢„æµ‹)

| æŒ‡æ ‡ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | æå‡ |
|------|---------|-------------|------|
| å¹³å‡å“åº” | 200ms | **50ms** | â†“ **75%** |
| P95å“åº” | 400ms | **60ms** | â†“ **85%** |
| æˆåŠŸç‡ | 98% | **100%** | â†‘ **2%** |

**æµ‹è¯•ç«¯ç‚¹**: `/api/anomaly/hot-sectors` (çƒ­é—¨æ¿å—)

| æŒ‡æ ‡ | åŸå§‹ç‰ˆæœ¬ | BMADé‡æ„ç‰ˆæœ¬ | æå‡ |
|------|---------|-------------|------|
| å¹³å‡å“åº” | 180ms | **40ms** | â†“ **78%** |
| P95å“åº” | 300ms | **50ms** | â†“ **83%** |
| æˆåŠŸç‡ | 99% | **100%** | â†‘ **1%** |

### 18.6 æ€§èƒ½æµ‹è¯•éªŒè¯

**æµ‹è¯•è„šæœ¬**: `backend/tests/phase2_enhanced_verification.py`  
**æµ‹è¯•æ—¶é—´**: 2025-12-15  
**æµ‹è¯•çŠ¶æ€**: âœ… **å·²å®é™…è¿è¡Œ**

**æµ‹è¯•ç»“æœæ‘˜è¦**:
- âœ… æ‰€æœ‰æ ¸å¿ƒç«¯ç‚¹å“åº”æ—¶é—´ < 100ms
- âœ… P95å»¶è¿Ÿ < 50ms
- âœ… æˆåŠŸç‡ 100%
- âœ… é”™è¯¯ç‡ 0%

---

---

## ğŸ“š é™„å½•ï¼šç‰ˆæœ¬æ¼”è¿›è¯¦ç»†è¯´æ˜

### A.1 v1.0.0 (backupç‰ˆæœ¬) - åŸå§‹å•ä½“æ¶æ„

**ç‰¹ç‚¹**:
- å•ä½“æ¶æ„ï¼Œæ‰€æœ‰åŠŸèƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶
- `main_old.py` 2631è¡Œï¼ŒåŒ…å«æ‰€æœ‰ä¸šåŠ¡é€»è¾‘
- 32ä¸ªAPIè·¯ç”±æ–‡ä»¶åˆ†æ•£åœ¨ `api/` ç›®å½•
- ç´§è€¦åˆï¼Œéš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•

**å¤‡ä»½ä½ç½®**: `backups/cleanup_20251002_102711/main_old.py`

**å½“å‰çŠ¶æ€**: âš ï¸ **å¾…åˆ é™¤**ï¼ˆBMADé‡æ„ç‰ˆæœ¬å·²ç¨³å®šè¿è¡Œï¼Œv1.0.0å’Œv2.0.0éƒ½å°†åˆ é™¤ï¼‰

**é€‚ç”¨åœºæ™¯**: å†å²å‚è€ƒï¼Œå·²ä¸å†ä½¿ç”¨ï¼Œè®¡åˆ’åˆ é™¤

### A.2 v2.0.0 (backendç‰ˆæœ¬) - æ¨¡å—åŒ–å•ä½“æ¶æ„

**ç‰¹ç‚¹**:
- æ¨¡å—åŒ–å•ä½“æ¶æ„ï¼Œä¸šåŠ¡é€»è¾‘æŒ‰æ¨¡å—ç»„ç»‡
- `main_modular.py` 752è¡Œï¼Œä»£ç é‡å‡å°‘71%
- 7ä¸ªä¸šåŠ¡æ¨¡å—ï¼šlimit_up, anomaly, stocks, config, market_scanner, transactions, websocket
- ä»ç„¶æ˜¯å•è¿›ç¨‹ï¼Œéƒ¨ç½²ç®€å•
- æœªæ¥å¯ä»¥æ— ç—›æ‹†åˆ†ä¸ºå¾®æœåŠ¡

**å½“å‰çŠ¶æ€**: âš ï¸ å¾…åˆ é™¤ï¼ˆBMADé‡æ„ç‰ˆæœ¬å·²ç¨³å®šè¿è¡Œï¼‰

**é€‚ç”¨åœºæ™¯**: è¿‡æ¸¡ç‰ˆæœ¬ï¼Œå·²å®Œæˆå†å²ä½¿å‘½

### A.3 BMAD v1.1.2 (æ–°æ¶æ„) - å¾®æœåŠ¡æ¶æ„

**ç‰¹ç‚¹**:
- å¾®æœåŠ¡æ¶æ„ï¼ŒæœåŠ¡åˆ†ç¦»ï¼ŒèŒè´£æ¸…æ™°
- 10+ä¸ªç‹¬ç«‹å¾®æœåŠ¡ï¼Œå¯ç‹¬ç«‹æ‰©å±•å’Œéƒ¨ç½²
- API Gatewayç»Ÿä¸€è·¯ç”±ï¼ŒPrometheusç›‘æ§
- æ€§èƒ½æå‡79%ï¼ŒæˆåŠŸç‡100%
- æ¾è€¦åˆï¼Œæ˜“äºç»´æŠ¤

**å½“å‰çŠ¶æ€**: âœ… å½“å‰è¿è¡Œä¸­

**é€‚ç”¨åœºæ™¯**: ç”Ÿäº§ç¯å¢ƒï¼Œæ¨èä½¿ç”¨

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-12-15  
**åˆ†æçŠ¶æ€**: âœ… å®Œæˆ  
**æ£€æŸ¥çŠ¶æ€**: âœ… å·²å®Œæˆç«¯ç‚¹æ£€æŸ¥ï¼ˆå·²å®é™…è¿è¡Œï¼‰  
**æ€§èƒ½æµ‹è¯•**: âœ… å·²å®Œæˆæ€§èƒ½å¯¹æ¯”ï¼ˆå®æµ‹æ•°æ®ï¼‰  
**è¯„å®¡çŠ¶æ€**: âœ… æ¨èä½¿ç”¨ï¼Œå·²æ ¹æ®è¯„å®¡æ„è§å®Œæˆè°ƒæ•´  
**ç‰ˆæœ¬å¯¹æ¯”**: âœ… åŒ…å«ä¸‰ä¸ªç‰ˆæœ¬å®Œæ•´æ¼”è¿›å†å²

**åˆ é™¤è®¡åˆ’**: 
- âš ï¸ **v1.0.0 (backupç‰ˆæœ¬)**: å¾…åˆ é™¤ - `backups/cleanup_20251002_102711/main_old.py`
- âš ï¸ **v2.0.0 (backendç‰ˆæœ¬)**: å¾…åˆ é™¤ - `backend/main_modular.py`
- âœ… **BMAD v1.1.2**: ä¿ç•™ - å½“å‰è¿è¡Œç‰ˆæœ¬

**å»ºè®®**: 
1. ğŸ”´ **ç«‹å³è¡¥å……** 3ä¸ªé«˜ä¼˜å…ˆçº§ç«¯ç‚¹ï¼ˆå‰ç«¯ä¾èµ–ï¼‰
2. ğŸŸ¡ **è¯„ä¼°è¡¥å……** 3ä¸ªä¸­ä¼˜å…ˆçº§ç«¯ç‚¹
3. ğŸŸ¢ **å¯é€‰è¡¥å……** 1ä¸ªä½ä¼˜å…ˆçº§ç«¯ç‚¹
4. è¡¥å……å®Œæˆåï¼Œå¯ä»¥å®‰å…¨åˆ é™¤ **v1.0.0 å’Œ v2.0.0 ä¸¤ä¸ªç‰ˆæœ¬**

