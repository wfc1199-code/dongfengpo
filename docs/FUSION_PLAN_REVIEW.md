# èåˆæ–¹æ¡ˆå®¡æŸ¥æŠ¥å‘Šï¼šç›¯ç›˜é›·è¾¾ + æ˜æ—¥æ½œåŠ› + AIé‡åŒ–ç­–ç•¥

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

**å®¡æŸ¥æ—¥æœŸ**: 2025-01-XX  
**å®¡æŸ¥èŒƒå›´**: v20æ¶æ„æ–¹æ¡ˆ + èåˆæ–¹æ¡ˆ  
**å®¡æŸ¥ç»“è®º**: âœ… **æ–¹æ¡ˆå¯è¡Œï¼Œä½†éœ€è¦æ˜ç¡®æ•°æ®æµå’Œç»Ÿä¸€è¯„åˆ†ç³»ç»Ÿ**

---

## 1. æ–¹æ¡ˆæ¶æ„åˆ†æ

### 1.1 èåˆç‚¹è®¾è®¡ âœ…

| èåˆç‚¹ | ç°æœ‰åŠŸèƒ½ | AIç­–ç•¥ | èåˆæ–¹å¼ | çŠ¶æ€ |
|--------|---------|--------|---------|------|
| **ç›¯ç›˜é›·è¾¾** | å¼‚åŠ¨æ£€æµ‹ (`limit_up.py`) | ç‚¹ç«ç­–ç•¥ (`IgnitionStrategy`) | å¼‚åŠ¨æ£€æµ‹ â†’ Ignitionè¯„åˆ† â†’ é£æ§ â†’ æ¨é€ | âœ… å¯è¡Œ |
| **æ˜æ—¥æ½œåŠ›** | é¦–æ¿ç­›é€‰ (`second-board-candidates`) | æ½œä¼ç­–ç•¥ (`AmbushStrategy`) | é¦–æ¿ â†’ Ambushå› å­ â†’ AIåˆ†æ â†’ æ˜æ—¥æ±  | âœ… å¯è¡Œ |

**ä¼˜åŠ¿**:
- âœ… æ–°æ—§ç³»ç»Ÿå¹¶è¡Œï¼Œä¸ç ´åç°æœ‰åŠŸèƒ½
- âœ… é‡‡ç”¨"æ—è·¯æŒ‚è½½"æ¨¡å¼ï¼Œé£é™©å¯æ§
- âœ… ç­–ç•¥èŒè´£æ¸…æ™°ï¼šAmbushï¼ˆæ—¥çº¿ï¼‰vs Ignitionï¼ˆåˆ†é’Ÿçº¿ï¼‰

### 1.2 ç»Ÿä¸€5ç»´è¯„åˆ†ç³»ç»Ÿ âš ï¸

**ç”¨æˆ·æå‡ºçš„è¯„åˆ†æƒé‡**:
```
æ¶¨å¹…å¼‚åŠ¨(40%) + æ¢æ‰‹æ´»è·ƒ(25%) + æˆäº¤è§„æ¨¡(20%) + å½¢æ€å¼ºåŠ¿(10%) + é‡ä»·é…åˆ(5%)
```

**ç°æœ‰è¯„åˆ†ç³»ç»Ÿå¯¹æ¯”**:

| ç³»ç»Ÿ | ç»´åº¦ | æƒé‡åˆ†å¸ƒ | çŠ¶æ€ |
|------|------|---------|------|
| **å¼ºåŠ¿ç¥¨æ•æ‰ç­–ç•¥** | 5ç»´ | æ¶¨å¹…å¼‚åŠ¨40% + æ¢æ‰‹ç‡25% + æˆäº¤é¢20% + å½¢æ€å¼ºåŠ¿10% + é‡ä»·é…åˆ5% | âœ… å®Œå…¨ä¸€è‡´ |
| **å‰ç«¯æœºä¼šè¯„åˆ†** | 4ç»´ | Confidence 40% + Strength 30% + SignalCount 15% + Trend 15% | âš ï¸ ä¸ä¸€è‡´ |
| **æ¶¨åœé¢„æµ‹ç­–ç•¥** | å¤šç»´åº¦ | æ¶¨å¹…ã€æˆäº¤é‡ã€åŠ¨é‡ã€æ—¶é—´å› ç´  | âš ï¸ æœªç»Ÿä¸€ |

**é—®é¢˜è¯†åˆ«**:
1. âŒ **è¯„åˆ†ç³»ç»Ÿä¸ç»Ÿä¸€**: å‰ç«¯ä½¿ç”¨4ç»´è¯„åˆ†ï¼Œå¼ºåŠ¿ç¥¨ä½¿ç”¨5ç»´è¯„åˆ†
2. âš ï¸ **æ•°æ®æºä¸ä¸€è‡´**: å¼ºåŠ¿ç¥¨è¯„åˆ†åŸºäºæ¿å—ç­›é€‰ï¼Œèåˆæ–¹æ¡ˆéœ€è¦ç»Ÿä¸€æ•°æ®æº
3. âš ï¸ **è¯„åˆ†æ—¶æœºä¸åŒ**: å¼ºåŠ¿ç¥¨æ˜¯ç›˜ä¸­å®æ—¶ï¼Œæ˜æ—¥æ½œåŠ›æ˜¯ç›˜ååˆ†æ

---

## 2. æŠ€æœ¯å®ç°å®¡æŸ¥

### 2.1 ç›¯ç›˜é›·è¾¾ + ç‚¹ç«ç­–ç•¥èåˆ ğŸ”

**æ•°æ®æµè®¾è®¡**:
```
å¼‚åŠ¨æ£€æµ‹ (limit_up.py) 
  â†“
å®æ—¶å¿«ç…§ (AkShare)
  â†“
Ignitionç­–ç•¥è¯„åˆ† (åˆ†é’Ÿçº¿æ•°æ®)
  â†“
é£æ§æ£€æŸ¥ (RiskManager)
  â†“
æ¨é€ä¿¡å· (WebSocket)
```

**æŠ€æœ¯è¦ç‚¹**:
- âœ… Ignitionç­–ç•¥å·²å®ç°åˆ†é’Ÿçº¿å› å­è®¡ç®— (`minute_volume_ratio`, `price_vs_bb`)
- âœ… é£æ§ç³»ç»Ÿå·²å°±ç»ª (`RiskManager` with stop-loss, circuit breaker)
- âš ï¸ **éœ€è¦**: å°†å¼‚åŠ¨æ£€æµ‹ç»“æœè½¬æ¢ä¸ºIgnitionç­–ç•¥è¾“å…¥æ ¼å¼
- âš ï¸ **éœ€è¦**: åˆ†é’Ÿçº¿æ•°æ®æºæ¥å…¥ï¼ˆå½“å‰ä½¿ç”¨AkShareæ—¥çº¿æ•°æ®ï¼‰

**å…³é”®ä¾èµ–**:
```python
# éœ€è¦å®ç°
1. å¼‚åŠ¨æ£€æµ‹ â†’ Ignitionè¾“å…¥é€‚é…å™¨
2. åˆ†é’Ÿçº¿æ•°æ®è·å–ï¼ˆTushare Pro æˆ– AkShareåˆ†é’Ÿçº¿ï¼‰
3. å®æ—¶å¼•æ“é›†æˆIgnitionç­–ç•¥
```

### 2.2 æ˜æ—¥æ½œåŠ› + æ½œä¼ç­–ç•¥èåˆ ğŸ”

**æ•°æ®æµè®¾è®¡**:
```
é¦–æ¿ç­›é€‰ (second-board-candidates)
  â†“
Ambushå› å­è®¡ç®— (30å¤©æ—¥çº¿æ•°æ®)
  â†“
AIåˆ†æ (DeepSeek Agent)
  â†“
æ˜æ—¥æ± ä¿å­˜ (SQLite)
```

**æŠ€æœ¯è¦ç‚¹**:
- âœ… Ambushç­–ç•¥å·²å®ç°æ—¥çº¿å› å­è®¡ç®— (`volume_ratio`, `bb_width`, `obv_divergence`)
- âœ… é¦–æ¿ç­›é€‰é€»è¾‘å·²å®ç°ï¼ˆæ’é™¤ä¸€å­—æ¿ã€å¼±åŠ¿è‚¡ï¼‰
- âš ï¸ **éœ€è¦**: å°†é¦–æ¿æ•°æ®è½¬æ¢ä¸ºAmbushç­–ç•¥è¾“å…¥æ ¼å¼
- âš ï¸ **éœ€è¦**: AIåˆ†ææ¥å£é›†æˆï¼ˆDeepSeek Agentï¼‰

**å…³é”®ä¾èµ–**:
```python
# éœ€è¦å®ç°
1. é¦–æ¿æ•°æ® â†’ Ambushè¾“å…¥é€‚é…å™¨
2. DuckDBæ•°æ®å±‚ï¼ˆ30å¤©å†å²æ•°æ®ï¼‰
3. AIåˆ†ææœåŠ¡é›†æˆ
```

---

## 3. æ½œåœ¨é—®é¢˜ä¸é£é™© âš ï¸

### 3.1 æ•°æ®ä¸€è‡´æ€§é£é™©

| é£é™©ç‚¹ | å½±å“ | ç¼“è§£æªæ–½ |
|--------|------|---------|
| **åˆ†é’Ÿçº¿æ•°æ®å»¶è¿Ÿ** | Ignitionç­–ç•¥è¯¯åˆ¤ | å®ç°æ•°æ®è´¨é‡æ£€æŸ¥ï¼Œå»¶è¿Ÿ>5ç§’å‘Šè­¦ |
| **æ—¥çº¿æ•°æ®ç¼ºå¤±** | Ambushç­–ç•¥æ— æ³•è®¡ç®— | å®ç°æ–­ç‚¹ç»­ä¼ ï¼Œè‡ªåŠ¨è¡¥å½• |
| **æ•°æ®æºåˆ‡æ¢** | è¯„åˆ†ä¸ä¸€è‡´ | ç»Ÿä¸€ä½¿ç”¨Tushare Proä½œä¸ºä¸»æ•°æ®æº |

### 3.2 è¯„åˆ†ç³»ç»Ÿå†²çª

**é—®é¢˜**: å‰ç«¯4ç»´è¯„åˆ† vs å¼ºåŠ¿ç¥¨5ç»´è¯„åˆ†

**å½±å“**:
- ç”¨æˆ·çœ‹åˆ°ä¸åŒè¯„åˆ†æ ‡å‡†ï¼Œäº§ç”Ÿå›°æƒ‘
- æ•°æ®ä¸ä¸€è‡´å¯¼è‡´å†³ç­–é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// æ–¹æ¡ˆ1: ç»Ÿä¸€ä½¿ç”¨5ç»´è¯„åˆ†ï¼ˆæ¨èï¼‰
ç»Ÿä¸€è¯„åˆ†å™¨ (UnifiedScorer)
  â”œâ”€ æ¶¨å¹…å¼‚åŠ¨ (40%)
  â”œâ”€ æ¢æ‰‹æ´»è·ƒ (25%)
  â”œâ”€ æˆäº¤è§„æ¨¡ (20%)
  â”œâ”€ å½¢æ€å¼ºåŠ¿ (10%)
  â””â”€ é‡ä»·é…åˆ (5%)

// æ–¹æ¡ˆ2: ä¿ç•™åŒè¯„åˆ†ç³»ç»Ÿï¼Œæ˜ç¡®æ ‡è¯†
- å®æ—¶è¯„åˆ†: 4ç»´ï¼ˆå¿«é€Ÿå“åº”ï¼‰
- ç»¼åˆè¯„åˆ†: 5ç»´ï¼ˆæ·±åº¦åˆ†æï¼‰
```

### 3.3 é£æ§é›†æˆç‚¹

**å½“å‰çŠ¶æ€**:
- âœ… é£æ§ç³»ç»Ÿå·²å®ç° (`RiskManager`)
- âš ï¸ **æœªæ˜ç¡®**: åœ¨èåˆæµç¨‹ä¸­çš„é›†æˆç‚¹

**å»ºè®®é›†æˆç‚¹**:
```
ç›¯ç›˜é›·è¾¾æµç¨‹:
  å¼‚åŠ¨æ£€æµ‹ â†’ Ignitionè¯„åˆ† â†’ [é£æ§æ£€æŸ¥] â†’ æ¨é€

æ˜æ—¥æ½œåŠ›æµç¨‹:
  é¦–æ¿ç­›é€‰ â†’ Ambushå› å­ â†’ AIåˆ†æ â†’ [é£æ§é¢„æ£€] â†’ æ˜æ—¥æ± 
```

---

## 4. å®æ–½è·¯çº¿å›¾å®¡æŸ¥

### 4.1 ç”¨æˆ·æå‡ºçš„è·¯çº¿å›¾

| é˜¶æ®µ | å†…å®¹ | å‘¨æœŸ | å®¡æŸ¥æ„è§ |
|------|------|------|---------|
| **Phase 1** | ç»Ÿä¸€è¯„åˆ†å™¨ â†’ é›†æˆé›·è¾¾/æ˜æ—¥ | æœ¬å‘¨ | âš ï¸ æ—¶é—´ç´§å¼ ï¼Œå»ºè®®æ‹†åˆ† |
| **Phase 2** | Ambush/Ignition ç­–ç•¥è¿é€š | ä¸‹å‘¨ | âœ… åˆç† |
| **Phase 3** | AIå¤æ ¸ + é£æ§æ¿€æ´» | åç»­ | âœ… åˆç† |

### 4.2 ä¼˜åŒ–åçš„å®æ–½è·¯çº¿å›¾

#### Phase 1: ç»Ÿä¸€è¯„åˆ†ç³»ç»Ÿ (Week 1-2)

**ç›®æ ‡**: å»ºç«‹ç»Ÿä¸€çš„5ç»´è¯„åˆ†ç³»ç»Ÿ

**ä»»åŠ¡æ¸…å•**:
- [ ] åˆ›å»º `UnifiedScorer` æœåŠ¡
  - [ ] å®ç°5ç»´è¯„åˆ†ç®—æ³•
  - [ ] é€‚é…ä¸åŒæ•°æ®æºï¼ˆæ—¥çº¿/åˆ†é’Ÿçº¿ï¼‰
  - [ ] æä¾›ç»Ÿä¸€APIæ¥å£
- [ ] å‰ç«¯é›†æˆç»Ÿä¸€è¯„åˆ†
  - [ ] æ›¿æ¢ç°æœ‰4ç»´è¯„åˆ†
  - [ ] æ›´æ–°UIæ˜¾ç¤ºé€»è¾‘
- [ ] åç«¯é›†æˆç»Ÿä¸€è¯„åˆ†
  - [ ] å¼ºåŠ¿ç¥¨æ•æ‰ç­–ç•¥ä½¿ç”¨ç»Ÿä¸€è¯„åˆ†
  - [ ] æ¶¨åœé¢„æµ‹ç­–ç•¥ä½¿ç”¨ç»Ÿä¸€è¯„åˆ†

**éªŒæ”¶æ ‡å‡†**:
- âœ… æ‰€æœ‰è¯„åˆ†ä½¿ç”¨ç»Ÿä¸€5ç»´æ ‡å‡†
- âœ… è¯„åˆ†ç»“æœä¸€è‡´æ€§éªŒè¯é€šè¿‡
- âœ… å‰ç«¯æ˜¾ç¤ºç»Ÿä¸€è¯„åˆ†

#### Phase 2: ç­–ç•¥è¿é€š (Week 3-4)

**ç›®æ ‡**: å®ç°AIç­–ç•¥ä¸ç°æœ‰åŠŸèƒ½çš„èåˆ

**ä»»åŠ¡æ¸…å•**:
- [ ] ç›¯ç›˜é›·è¾¾ + Ignitionç­–ç•¥
  - [ ] å®ç°å¼‚åŠ¨æ£€æµ‹ â†’ Ignitioné€‚é…å™¨
  - [ ] é›†æˆåˆ†é’Ÿçº¿æ•°æ®æº
  - [ ] å®ç°å®æ—¶å¼•æ“è°ƒç”¨Ignitionç­–ç•¥
  - [ ] é›†æˆé£æ§æ£€æŸ¥
- [ ] æ˜æ—¥æ½œåŠ› + Ambushç­–ç•¥
  - [ ] å®ç°é¦–æ¿æ•°æ® â†’ Ambushé€‚é…å™¨
  - [ ] é›†æˆDuckDBæ•°æ®å±‚
  - [ ] å®ç°Ambushå› å­è®¡ç®—
  - [ ] é›†æˆAIåˆ†ææœåŠ¡

**éªŒæ”¶æ ‡å‡†**:
- âœ… ç›¯ç›˜é›·è¾¾èƒ½è°ƒç”¨Ignitionç­–ç•¥è¯„åˆ†
- âœ… æ˜æ—¥æ½œåŠ›èƒ½è°ƒç”¨Ambushç­–ç•¥åˆ†æ
- âœ… é£æ§è§„åˆ™åœ¨èåˆæµç¨‹ä¸­ç”Ÿæ•ˆ

#### Phase 3: AIå¤æ ¸ + é£æ§æ¿€æ´» (Week 5+)

**ç›®æ ‡**: å®Œå–„AIåˆ†æå’Œé£æ§ç³»ç»Ÿ

**ä»»åŠ¡æ¸…å•**:
- [ ] AIåˆ†ææœåŠ¡é›†æˆ
  - [ ] DeepSeek Agentæ¥å£
  - [ ] åˆ†æç»“æœç¼“å­˜
  - [ ] åˆ†æç»“æœå±•ç¤º
- [ ] é£æ§ç³»ç»Ÿå®Œå–„
  - [ ] å®æ—¶é£æ§ç›‘æ§
  - [ ] é£æ§æ—¥å¿—å®¡è®¡
  - [ ] é£æ§å‘Šè­¦æœºåˆ¶
- [ ] å¯è§‚æµ‹æ€§
  - [ ] ä¿¡å·å»¶è¿Ÿç›‘æ§
  - [ ] ç­–ç•¥æ€§èƒ½ç»Ÿè®¡
  - [ ] ç”¨æˆ·è¡Œä¸ºåˆ†æ

**éªŒæ”¶æ ‡å‡†**:
- âœ… AIåˆ†æç»“æœå‡†ç¡®ç‡>70%
- âœ… é£æ§æ‹¦æˆªç‡ç»Ÿè®¡
- âœ… ä¿¡å·å»¶è¿Ÿ<5ç§’SLAè¾¾æ ‡

---

## 5. å…³é”®è®¾è®¡å†³ç­–

### 5.1 è¯„åˆ†ç³»ç»Ÿç»Ÿä¸€ âœ…

**å†³ç­–**: é‡‡ç”¨5ç»´è¯„åˆ†ç³»ç»Ÿä½œä¸ºç»Ÿä¸€æ ‡å‡†

**ç†ç”±**:
1. ä¸å¼ºåŠ¿ç¥¨æ•æ‰ç­–ç•¥ä¸€è‡´ï¼Œå‡å°‘ç”¨æˆ·å›°æƒ‘
2. 5ç»´è¯„åˆ†æ›´å…¨é¢ï¼Œè¦†ç›–æ›´å¤šå¸‚åœºç‰¹å¾
3. å·²æœ‰æˆç†Ÿå®ç°ï¼Œå¯ç›´æ¥å¤ç”¨

**å®æ–½**:
```python
# services/signal-api/signal_api/core/scoring/unified_scorer.py
class UnifiedScorer:
    """ç»Ÿä¸€5ç»´è¯„åˆ†ç³»ç»Ÿ"""
    
    def calculate_score(self, data: Dict) -> ScoreResult:
        """
        è®¡ç®—5ç»´ç»¼åˆè¯„åˆ†
        
        Args:
            data: åŒ…å«æ¶¨å¹…ã€æ¢æ‰‹ç‡ã€æˆäº¤é¢ã€å½¢æ€ã€é‡ä»·ç­‰æ•°æ®
            
        Returns:
            ScoreResult: åŒ…å«æ€»åˆ†å’Œå„ç»´åº¦å¾—åˆ†
        """
        score = (
            self._price_change_score(data) * 0.40 +  # æ¶¨å¹…å¼‚åŠ¨ 40%
            self._turnover_score(data) * 0.25 +       # æ¢æ‰‹æ´»è·ƒ 25%
            self._volume_score(data) * 0.20 +         # æˆäº¤è§„æ¨¡ 20%
            self._pattern_score(data) * 0.10 +        # å½¢æ€å¼ºåŠ¿ 10%
            self._price_volume_score(data) * 0.05     # é‡ä»·é…åˆ 5%
        )
        return ScoreResult(score=score, ...)
```

### 5.2 æ•°æ®æµè®¾è®¡ âœ…

**å†³ç­–**: é‡‡ç”¨é€‚é…å™¨æ¨¡å¼è¿æ¥ç°æœ‰åŠŸèƒ½ä¸AIç­–ç•¥

**ç†ç”±**:
1. è§£è€¦ç°æœ‰ç³»ç»Ÿä¸AIç­–ç•¥
2. ä¾¿äºç‹¬ç«‹æµ‹è¯•å’Œç»´æŠ¤
3. æ”¯æŒæœªæ¥æ‰©å±•æ–°ç­–ç•¥

**å®æ–½**:
```python
# é€‚é…å™¨ç¤ºä¾‹
class IgnitionAdapter:
    """å°†å¼‚åŠ¨æ£€æµ‹ç»“æœè½¬æ¢ä¸ºIgnitionç­–ç•¥è¾“å…¥"""
    
    def adapt(self, anomaly_data: Dict) -> pd.DataFrame:
        """è½¬æ¢ä¸ºåˆ†é’Ÿçº¿DataFrameæ ¼å¼"""
        # å®ç°è½¬æ¢é€»è¾‘
        pass

class AmbushAdapter:
    """å°†é¦–æ¿æ•°æ®è½¬æ¢ä¸ºAmbushç­–ç•¥è¾“å…¥"""
    
    def adapt(self, first_board_data: Dict) -> pd.DataFrame:
        """è½¬æ¢ä¸ºæ—¥çº¿DataFrameæ ¼å¼"""
        # å®ç°è½¬æ¢é€»è¾‘
        pass
```

### 5.3 é£æ§é›†æˆç‚¹ âœ…

**å†³ç­–**: åœ¨ç­–ç•¥è¯„åˆ†åã€ä¿¡å·æ¨é€å‰è¿›è¡Œé£æ§æ£€æŸ¥

**ç†ç”±**:
1. ç¡®ä¿æ‰€æœ‰ä¿¡å·éƒ½ç»è¿‡é£æ§
2. é£æ§ç»“æœå¯è¿½æº¯
3. ä¸å½±å“ç­–ç•¥è®¡ç®—æ€§èƒ½

**å®æ–½**:
```python
# èåˆæµç¨‹ç¤ºä¾‹
def radar_fusion_workflow(anomaly_data):
    # 1. å¼‚åŠ¨æ£€æµ‹
    anomaly = detect_anomaly(anomaly_data)
    
    # 2. Ignitionç­–ç•¥è¯„åˆ†
    ignition_score = ignition_strategy.score(anomaly)
    
    # 3. ç»Ÿä¸€è¯„åˆ†
    unified_score = unified_scorer.calculate(anomaly)
    
    # 4. é£æ§æ£€æŸ¥
    risk_check = risk_manager.check_buy_signal(
        symbol=anomaly.symbol,
        proposed_value=calculate_position_size(unified_score)
    )
    
    # 5. æ¨é€ä¿¡å·ï¼ˆå¦‚æœé€šè¿‡é£æ§ï¼‰
    if risk_check.is_allowed:
        push_signal(anomaly, unified_score, ignition_score)
    else:
        log_rejection(anomaly, risk_check)
```

---

## 6. æ”¹è¿›å»ºè®® ğŸ’¡

### 6.1 è¯„åˆ†ç³»ç»Ÿå¢å¼º

**å»ºè®®**: å¢åŠ åŠ¨æ€æƒé‡è°ƒæ•´

```python
class AdaptiveUnifiedScorer(UnifiedScorer):
    """è‡ªé€‚åº”æƒé‡è¯„åˆ†ç³»ç»Ÿ"""
    
    def adjust_weights(self, market_condition: str):
        """
        æ ¹æ®å¸‚åœºç¯å¢ƒè°ƒæ•´æƒé‡
        
        Args:
            market_condition: 'bull' | 'bear' | 'volatile'
        """
        if market_condition == 'bull':
            # ç‰›å¸‚ï¼šæ›´é‡è§†æ¶¨å¹…å’Œæˆäº¤è§„æ¨¡
            self.weights = [0.45, 0.20, 0.25, 0.05, 0.05]
        elif market_condition == 'bear':
            # ç†Šå¸‚ï¼šæ›´é‡è§†å½¢æ€å’Œé‡ä»·é…åˆ
            self.weights = [0.30, 0.20, 0.15, 0.20, 0.15]
        # ...
```

### 6.2 æ•°æ®è´¨é‡ä¿éšœ

**å»ºè®®**: å®ç°æ•°æ®è´¨é‡æ£€æŸ¥ä¸­é—´ä»¶

```python
class DataQualityMiddleware:
    """æ•°æ®è´¨é‡æ£€æŸ¥ä¸­é—´ä»¶"""
    
    def check(self, data: Dict) -> QualityResult:
        """
        æ£€æŸ¥æ•°æ®è´¨é‡
        
        Returns:
            QualityResult: åŒ…å«è´¨é‡è¯„åˆ†å’Œé—®é¢˜åˆ—è¡¨
        """
        issues = []
        
        # æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
        if missing_fields := self._check_completeness(data):
            issues.append(f"ç¼ºå¤±å­—æ®µ: {missing_fields}")
        
        # æ£€æŸ¥æ•°æ®æ—¶æ•ˆæ€§
        if delay := self._check_freshness(data):
            if delay > 5:  # å»¶è¿Ÿ>5ç§’
                issues.append(f"æ•°æ®å»¶è¿Ÿ: {delay}ç§’")
        
        # æ£€æŸ¥æ•°æ®åˆç†æ€§
        if anomalies := self._check_reasonableness(data):
            issues.append(f"å¼‚å¸¸å€¼: {anomalies}")
        
        return QualityResult(score=calculate_score(issues), issues=issues)
```

### 6.3 ç­–ç•¥æ€§èƒ½ç›‘æ§

**å»ºè®®**: å®ç°ç­–ç•¥æ€§èƒ½è¿½è¸ª

```python
class StrategyPerformanceTracker:
    """ç­–ç•¥æ€§èƒ½è¿½è¸ªå™¨"""
    
    def track_signal(self, signal: Signal, outcome: Outcome):
        """
        è¿½è¸ªä¿¡å·è¡¨ç°
        
        Args:
            signal: ç­–ç•¥ç”Ÿæˆçš„ä¿¡å·
            outcome: å®é™…ç»“æœï¼ˆæ¶¨å¹…ã€æ˜¯å¦æ¶¨åœç­‰ï¼‰
        """
        # è®°å½•ä¿¡å·å’Œç»“æœ
        self._record(signal, outcome)
        
        # è®¡ç®—ç­–ç•¥æŒ‡æ ‡
        metrics = self._calculate_metrics()
        
        # æ›´æ–°ç­–ç•¥æƒé‡ï¼ˆå¦‚æœæ€§èƒ½ä¸‹é™ï¼‰
        if metrics.sharpe_ratio < threshold:
            self._adjust_strategy_weight(signal.strategy_name)
```

---

## 7. éªŒæ”¶æ ‡å‡† âœ…

### 7.1 åŠŸèƒ½éªŒæ”¶

- [ ] **ç»Ÿä¸€è¯„åˆ†**: æ‰€æœ‰åŠŸèƒ½ä½¿ç”¨5ç»´è¯„åˆ†ç³»ç»Ÿ
- [ ] **ç­–ç•¥èåˆ**: ç›¯ç›˜é›·è¾¾èƒ½è°ƒç”¨Ignitionç­–ç•¥
- [ ] **ç­–ç•¥èåˆ**: æ˜æ—¥æ½œåŠ›èƒ½è°ƒç”¨Ambushç­–ç•¥
- [ ] **é£æ§é›†æˆ**: æ‰€æœ‰ä¿¡å·ç»è¿‡é£æ§æ£€æŸ¥
- [ ] **æ•°æ®ä¸€è‡´æ€§**: è¯„åˆ†ç»“æœåœ¨ä¸åŒæ¨¡å—é—´ä¸€è‡´

### 7.2 æ€§èƒ½éªŒæ”¶

- [ ] **å“åº”æ—¶é—´**: ä¿¡å·å»¶è¿Ÿ < 5ç§’
- [ ] **æ•°æ®è´¨é‡**: æ•°æ®å®Œæ•´æ€§ > 95%
- [ ] **ç³»ç»Ÿç¨³å®šæ€§**: 7x24å°æ—¶è¿è¡Œæ— æ•…éšœ

### 7.3 ç”¨æˆ·ä½“éªŒéªŒæ”¶

- [ ] **ç•Œé¢ç»Ÿä¸€**: è¯„åˆ†æ˜¾ç¤ºä¸€è‡´
- [ ] **ä¿¡æ¯å®Œæ•´**: æ˜¾ç¤ºè¯„åˆ†ä¾æ®å’Œé£æ§ç»“æœ
- [ ] **æ“ä½œæµç•…**: æ— å¡é¡¿å’Œå»¶è¿Ÿ

---

## 8. æ€»ç»“ä¸å»ºè®®

### 8.1 æ–¹æ¡ˆè¯„ä»·

**æ€»ä½“è¯„ä»·**: âœ… **æ–¹æ¡ˆå¯è¡Œï¼Œæ¶æ„åˆç†**

**ä¼˜åŠ¿**:
1. âœ… é‡‡ç”¨"æ—è·¯æŒ‚è½½"æ¨¡å¼ï¼Œé£é™©å¯æ§
2. âœ… ç­–ç•¥èŒè´£æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤
3. âœ… èåˆç‚¹è®¾è®¡åˆç†ï¼Œç¬¦åˆä¸šåŠ¡é€»è¾‘

**éœ€è¦æ”¹è¿›**:
1. âš ï¸ ç»Ÿä¸€è¯„åˆ†ç³»ç»Ÿï¼ˆå½“å‰å­˜åœ¨å¤šå¥—è¯„åˆ†æ ‡å‡†ï¼‰
2. âš ï¸ æ˜ç¡®æ•°æ®æµå’Œé›†æˆç‚¹
3. âš ï¸ å®Œå–„é£æ§é›†æˆæœºåˆ¶

### 8.2 å®æ–½å»ºè®®

**ä¼˜å…ˆçº§æ’åº**:
1. **P0**: ç»Ÿä¸€è¯„åˆ†ç³»ç»Ÿï¼ˆå½±å“ç”¨æˆ·ä½“éªŒï¼‰
2. **P0**: æ•°æ®è´¨é‡ä¿éšœï¼ˆå½±å“ç­–ç•¥å‡†ç¡®æ€§ï¼‰
3. **P1**: ç­–ç•¥è¿é€šï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
4. **P1**: é£æ§é›†æˆï¼ˆé£é™©æ§åˆ¶ï¼‰
5. **P2**: AIåˆ†æé›†æˆï¼ˆå¢å¼ºåŠŸèƒ½ï¼‰
6. **P2**: æ€§èƒ½ç›‘æ§ï¼ˆå¯è§‚æµ‹æ€§ï¼‰

**é£é™©æ§åˆ¶**:
- é‡‡ç”¨ç°åº¦å‘å¸ƒï¼Œå…ˆåœ¨å°èŒƒå›´æµ‹è¯•
- ä¿ç•™æ—§ç³»ç»Ÿä½œä¸ºå›é€€æ–¹æ¡ˆ
- å»ºç«‹å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

---

## é™„å½•

### A. ç›¸å…³æ–‡ä»¶

- `implementation_plan.md.resolved.22` - v20æ¶æ„æ–¹æ¡ˆ
- `docs/å¼ºåŠ¿ç¥¨æ•æ‰ç­–ç•¥.md` - å¼ºåŠ¿ç¥¨è¯„åˆ†ç³»ç»Ÿ
- `services/signal-api/signal_api/core/quant/strategies/ambush.py` - Ambushç­–ç•¥
- `services/signal-api/signal_api/core/quant/strategies/ignition.py` - Ignitionç­–ç•¥
- `services/signal-api/signal_api/core/quant/risk/manager.py` - é£æ§ç³»ç»Ÿ

### B. æŠ€æœ¯æ ˆ

- **åç«¯**: Python, FastAPI, Pandas, NumPy
- **æ•°æ®å­˜å‚¨**: DuckDB, SQLite, Parquet
- **æ•°æ®æº**: Tushare Pro, AkShare
- **AIæœåŠ¡**: DeepSeek Agent
- **å‰ç«¯**: React, TypeScript

---

**å®¡æŸ¥äºº**: AI Assistant  
**å®¡æŸ¥æ—¥æœŸ**: 2025-01-XX  
**ç‰ˆæœ¬**: v1.0

