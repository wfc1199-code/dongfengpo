# 横盘突破监控工具 - 功能对比文档

## 原Windows版本 vs macOS版本功能对应表

| 功能模块 | 原Windows版本 | macOS版本实现 | 实现状态 | 备注 |
|---------|---------------|---------------|----------|------|
| **数据源** | | | | |
| 腾讯股票API | ✅ `http://qt.gtimg.cn/q=` | ✅ `TencentDataSource` | 完成 | 实时行情数据 |
| 东方财富API | ✅ `https://push2.eastmoney.com/api/qt/stock/kline/get` | ✅ `EastMoneyDataSource` | 完成 | K线历史数据 |
| 搜狐财经API | ✅ `https://q.stock.sohu.com/hisHq` | ✅ `SohuDataSource` | 完成 | 历史行情数据 |
| **核心算法** | | | | |
| AI异动拉升检测 | ✅ 涨幅增速算法 | ✅ `AnomalyDetector` | 完成 | 基于斜率计算的涨速检测 |
| 横盘突破识别 | ✅ 横盘形态+突破 | ✅ `SidewaysPattern` | 完成 | 价格波动范围+突破检测 |
| 股票状态分类 | ✅ 开始/持续/快停/涨停 | ✅ `StockState枚举` | 完成 | 五种状态完整对应 |
| **监控功能** | | | | |
| 实时股票监控 | ✅ 10秒刷新 | ✅ 异步监控任务 | 完成 | 可配置刷新间隔 |
| 冠绝榜排序 | ✅ 多维度排序 | ✅ `generate_champion_list` | 完成 | 按涨速/资金/异动次数排序 |
| 热门板块统计 | ✅ 板块异动数量统计 | ✅ `HotSectorDetector` | 部分完成 | 需完善板块数据 |
| **资金监控** | | | | |
| 大单检测 | ✅ >6000手或>300万 | ✅ `BigOrderDetector` | 完成 | 相同阈值标准 |
| 资金流向分析 | ✅ 总资金+近2分钟资金 | ✅ `CapitalFlowCalculator` | 完成 | 主动买卖资金计算 |
| 主力资金识别 | ✅ 大单巨单监控 | ✅ 最大订单金额统计 | 完成 | 实时大单统计 |
| **预警系统** | | | | |
| 异动拉升报警 | ✅ 开始拉升触发 | ✅ API接口+后台任务 | 完成 | 支持多种预警条件 |
| 钉钉机器人推送 | ✅ 配置URL推送 | ✅ 预警接口框架 | 部分完成 | 需完善钉钉集成 |
| 声音提醒 | ✅ 本地声音播放 | 🔄 系统通知接口 | 规划中 | macOS通知中心 |
| **技术指标** | | | | |
| 涨幅增速计算 | ✅ 核心算法 | ✅ `calculate_speed` | 完成 | 线性回归斜率计算 |
| 连续异动统计 | ✅ 连续拉升次数 | ✅ `calculate_continuous_anomalies` | 完成 | 时间间隔判断连续性 |
| 十拉几统计 | ✅ 最近10次异动统计 | ✅ `calculate_recent_anomaly_count` | 完成 | 统计最近N次中的异动 |
| 突破前高检测 | ✅ 最大峰值突破 | ✅ `_check_peak_breakthrough` | 完成 | 动态峰值更新 |
| **用户界面** | | | | |
| 冠绝榜列表 | ✅ TreeView表格 | ✅ API接口 | 完成 | RESTful接口返回 |
| 量子图形矩阵 | ✅ 4/9/16窗口显示 | 🔄 前端组件 | 规划中 | React/Vue组件 |
| 分时图显示 | ✅ 实时K线图 | 🔄 图表组件 | 规划中 | Chart.js/ECharts |
| 报警列表 | ✅ 报警记录表格 | ✅ API接口 | 完成 | 支持筛选查询 |
| **配置管理** | | | | |
| 市场选择 | ✅ 沪深创科选择 | ✅ `markets`配置 | 完成 | 完全对应 |
| 参数调整 | ✅ 增速阈值等 | ✅ `anomaly`配置 | 完成 | 动态配置更新 |
| 自定义股票池 | ✅ SelfDefine.xlsx | ✅ 股票池API | 完成 | JSON格式管理 |
| **数据存储** | | | | |
| 股票代码库 | ✅ config.ini | ✅ data/stocks.json | 完成 | 完整A股代码库 |
| 历史异动记录 | ✅ 内存存储 | ✅ `anomaly_history` | 完成 | 可扩展到数据库 |
| 配置文件 | ✅ localconfig.ini | ✅ data/config.json | 完成 | JSON格式配置 |

## 新增功能 (macOS版本独有)

| 功能 | 描述 | API接口 | 状态 |
|------|------|---------|------|
| RESTful API | 完整的HTTP API服务 | `/api/*` | ✅ 完成 |
| 异步处理 | 高性能异步数据处理 | - | ✅ 完成 |
| 模块化架构 | 清晰的模块分离 | - | ✅ 完成 |
| 配置热更新 | 运行时配置更新 | `/api/config` | ✅ 完成 |
| 统计分析 | 每日异动统计 | `/api/anomaly/statistics/daily` | ✅ 完成 |
| 跨平台兼容 | 支持macOS优化 | - | ✅ 完成 |

## 技术架构对比

| 方面 | 原Windows版本 | macOS版本 |
|------|---------------|-----------|
| 编程语言 | C++ | Python 3.8+ |
| UI框架 | Qt5 | FastAPI + Web前端 |
| 数据库 | 文件存储 | JSON + 可扩展数据库 |
| 网络库 | libcurl | aiohttp |
| 并发模型 | 多线程 | 异步IO |
| 配置格式 | INI文件 | JSON配置 |
| 部署方式 | 单机exe | 服务化部署 |

## 实现进度总结

✅ **已完成 (90%)**:
- 核心算法完全实现
- 数据源集成完成
- API服务框架搭建
- 配置管理系统
- 异动检测引擎

🔄 **进行中 (10%)**:
- 前端界面开发
- 完整的钉钉集成
- 板块数据完善

📋 **待规划**:
- 性能优化
- 压力测试
- 打包发布

## 使用说明

### 启动服务
```bash
# 安装依赖
cd backend && pip install -r requirements.txt

# 启动API服务
./start_backend.sh

# 测试功能
python test_data_source.py
```

### API访问
- 服务地址: `http://localhost:8000`
- API文档: `http://localhost:8000/docs`
- 冠绝榜: `GET /api/anomaly/champion-list`
- 热门板块: `GET /api/anomaly/hot-sectors`
- 异动分析: `GET /api/anomaly/stocks/{code}/anomaly-analysis`

通过这个对比文档可以看出，我们的macOS版本不仅完整实现了原Windows版本的核心功能，还在技术架构上进行了现代化升级，提供了更好的扩展性和维护性。 