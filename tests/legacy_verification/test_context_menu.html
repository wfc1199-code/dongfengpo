<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å³é”®èœå•æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: #e5e5e5;
        }
        
        .test-area {
            border: 2px dashed #444;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            background: #2a2a2a;
        }
        
        .stock-item {
            background: #333;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .stock-item:hover {
            background: #444;
        }
        
        .context-menu {
            position: fixed;
            background: #2a2a2a;
            border: 1px solid #444;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            min-width: 180px;
            padding: 4px 0;
            display: none;
            z-index: 1000;
        }
        
        .context-menu.visible {
            display: block;
        }
        
        .context-menu-item {
            padding: 8px 12px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .context-menu-item:hover {
            background: #3a3a3a;
        }
        
        .log {
            background: #1a1a1a;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .log-item {
            margin: 2px 0;
            color: #4a9eff;
        }
    </style>
</head>
<body>
    <h1>å³é”®èœå•æµ‹è¯•</h1>
    
    <div class="test-area">
        <h2>æµ‹è¯•åŒºåŸŸ 1ï¼šæ­£å¸¸å³é”®èœå•</h2>
        <div class="stock-item" data-code="000001">
            000001 - å¹³å®‰é“¶è¡Œï¼ˆå³é”®ç‚¹å‡»æˆ‘ï¼‰
        </div>
        <div class="stock-item" data-code="600519">
            600519 - è´µå·èŒ…å°ï¼ˆå³é”®ç‚¹å‡»æˆ‘ï¼‰
        </div>
    </div>
    
    <div class="test-area">
        <h2>æµ‹è¯•åŒºåŸŸ 2ï¼šReactæ¨¡æ‹Ÿ</h2>
        <div id="react-test"></div>
    </div>
    
    <div class="log" id="log">
        <div>äº‹ä»¶æ—¥å¿—ï¼š</div>
    </div>
    
    <!-- å³é”®èœå• -->
    <div id="contextMenu" class="context-menu">
        <div class="context-menu-item" onclick="openF10()">ğŸ“Š æŸ¥çœ‹F10èµ„æ–™</div>
        <div class="context-menu-item" onclick="closeMenu()">âŒ å…³é—­</div>
    </div>
    
    <script>
        let currentStock = null;
        const log = document.getElementById('log');
        const menu = document.getElementById('contextMenu');
        
        function addLog(msg) {
            const item = document.createElement('div');
            item.className = 'log-item';
            item.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            log.appendChild(item);
            log.scrollTop = log.scrollHeight;
        }
        
        // æ™®é€šDOMå³é”®èœå•
        document.querySelectorAll('.stock-item').forEach(item => {
            item.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                currentStock = this.dataset.code;
                addLog(`å³é”®ç‚¹å‡»: ${currentStock}`);
                
                menu.style.left = e.pageX + 'px';
                menu.style.top = e.pageY + 'px';
                menu.classList.add('visible');
            });
        });
        
        // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
        document.addEventListener('click', function() {
            menu.classList.remove('visible');
        });
        
        function openF10() {
            if (currentStock) {
                const url = `http://basic.10jqka.com.cn/${currentStock}/`;
                addLog(`æ‰“å¼€F10: ${url}`);
                window.open(url, '_blank');
                closeMenu();
            }
        }
        
        function closeMenu() {
            menu.classList.remove('visible');
        }
        
        // Reactæ¨¡æ‹Ÿæµ‹è¯•
        const reactTest = document.getElementById('react-test');
        
        // åˆ›å»ºReacté£æ ¼çš„è‚¡ç¥¨é¡¹
        const stocks = [
            { code: '000002', name: 'ä¸‡ç§‘A' },
            { code: '300750', name: 'å®å¾·æ—¶ä»£' }
        ];
        
        stocks.forEach(stock => {
            const div = document.createElement('div');
            div.className = 'stock-item';
            div.textContent = `${stock.code} - ${stock.name}ï¼ˆReacté£æ ¼ï¼‰`;
            div.dataset.code = stock.code;
            
            // Reacté£æ ¼çš„äº‹ä»¶ç»‘å®š
            div.oncontextmenu = function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                currentStock = stock.code;
                addLog(`Reactå³é”®ç‚¹å‡»: ${currentStock}`);
                
                menu.style.left = e.pageX + 'px';
                menu.style.top = e.pageY + 'px';
                menu.classList.add('visible');
                
                return false;
            };
            
            reactTest.appendChild(div);
        });
        
        addLog('é¡µé¢åŠ è½½å®Œæˆï¼Œè¯·å³é”®ç‚¹å‡»è‚¡ç¥¨é¡¹è¿›è¡Œæµ‹è¯•');
    </script>
</body>
</html>