<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒèŠ±é¡ºF10åŠŸèƒ½æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 10px;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }
        
        .description {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .test-section {
            margin-bottom: 40px;
        }
        
        .test-section h2 {
            color: #444;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-section h2::before {
            content: 'ğŸ§ª';
        }
        
        /* è‚¡ç¥¨åˆ—è¡¨æ ·å¼ */
        .stock-list {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stock-item {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }
        
        .stock-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stock-item.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .stock-info {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .stock-code {
            font-weight: bold;
            font-size: 18px;
            color: #667eea;
            font-family: 'Courier New', monospace;
        }
        
        .stock-item.selected .stock-code {
            color: white;
        }
        
        .stock-name {
            font-size: 16px;
            color: #333;
        }
        
        .stock-item.selected .stock-name {
            color: white;
        }
        
        .stock-market {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .stock-item.selected .stock-market {
            background: white;
            color: #667eea;
        }
        
        /* å³é”®èœå•æ ·å¼ */
        .context-menu {
            position: fixed;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            padding: 5px 0;
            z-index: 1000;
            display: none;
            min-width: 200px;
        }
        
        .context-menu.visible {
            display: block;
        }
        
        .context-menu-header {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            font-weight: bold;
            color: #333;
            background: #f8f9fa;
        }
        
        .context-menu-item {
            padding: 10px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.2s;
        }
        
        .context-menu-item:hover {
            background: #f0f0f0;
        }
        
        .context-menu-divider {
            height: 1px;
            background: #eee;
            margin: 5px 0;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn-group {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .btn-primary {
            background: #667eea;
            color: white;
        }
        
        .btn-primary:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-success {
            background: #48bb78;
            color: white;
        }
        
        .btn-success:hover {
            background: #38a169;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.4);
        }
        
        .btn-info {
            background: #4299e1;
            color: white;
        }
        
        .btn-info:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }
        
        /* æµ‹è¯•ç»“æœåŒºåŸŸ */
        .test-result {
            background: #f0f9ff;
            border: 2px solid #90cdf4;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .test-result h3 {
            color: #2b6cb0;
            margin-bottom: 10px;
        }
        
        .result-item {
            margin: 5px 0;
            padding: 5px 10px;
            background: white;
            border-radius: 4px;
        }
        
        .result-success {
            color: #22c55e;
        }
        
        .result-error {
            color: #ef4444;
        }
        
        .result-warning {
            color: #f59e0b;
        }
        
        /* iframeæµ‹è¯•åŒºåŸŸ */
        .iframe-test {
            margin-top: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .iframe-header {
            background: #f3f4f6;
            padding: 10px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        #f10-iframe {
            width: 100%;
            height: 600px;
            border: none;
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }
        
        .error-msg {
            background: #fee;
            color: #c00;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        
        .success-msg {
            background: #e6ffed;
            color: #00882d;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>åŒèŠ±é¡ºF10åŠŸèƒ½æµ‹è¯•é¡µé¢</h1>
        <p class="description">
            æµ‹è¯•é€šè¿‡å³é”®ç‚¹å‡»è‚¡ç¥¨ï¼Œè®¿é—®åŒèŠ±é¡ºF10é¡µé¢çš„åŠŸèƒ½ã€‚<br>
            URLæ ¼å¼ï¼šhttp://basic.10jqka.com.cn/{è‚¡ç¥¨ä»£ç }/
        </p>
        
        <!-- æµ‹è¯•1ï¼šè‚¡ç¥¨åˆ—è¡¨å³é”®èœå• -->
        <div class="test-section">
            <h2>æµ‹è¯•1ï¼šè‚¡ç¥¨åˆ—è¡¨å³é”®èœå•</h2>
            <p style="color: #666; margin-bottom: 15px;">è¯·å³é”®ç‚¹å‡»ä¸‹æ–¹è‚¡ç¥¨ï¼Œé€‰æ‹©"æŸ¥çœ‹F10èµ„æ–™"</p>
            
            <div class="stock-list" id="stockList">
                <div class="stock-item" data-code="000001" data-name="å¹³å®‰é“¶è¡Œ">
                    <div class="stock-info">
                        <span class="stock-code">000001</span>
                        <span class="stock-name">å¹³å®‰é“¶è¡Œ</span>
                        <span class="stock-market">æ·±å¸‚</span>
                    </div>
                </div>
                <div class="stock-item" data-code="000002" data-name="ä¸‡ç§‘A">
                    <div class="stock-info">
                        <span class="stock-code">000002</span>
                        <span class="stock-name">ä¸‡ç§‘A</span>
                        <span class="stock-market">æ·±å¸‚</span>
                    </div>
                </div>
                <div class="stock-item" data-code="600519" data-name="è´µå·èŒ…å°">
                    <div class="stock-info">
                        <span class="stock-code">600519</span>
                        <span class="stock-name">è´µå·èŒ…å°</span>
                        <span class="stock-market">æ²ªå¸‚</span>
                    </div>
                </div>
                <div class="stock-item" data-code="600036" data-name="æ‹›å•†é“¶è¡Œ">
                    <div class="stock-info">
                        <span class="stock-code">600036</span>
                        <span class="stock-name">æ‹›å•†é“¶è¡Œ</span>
                        <span class="stock-market">æ²ªå¸‚</span>
                    </div>
                </div>
                <div class="stock-item" data-code="300750" data-name="å®å¾·æ—¶ä»£">
                    <div class="stock-info">
                        <span class="stock-code">300750</span>
                        <span class="stock-name">å®å¾·æ—¶ä»£</span>
                        <span class="stock-market">åˆ›ä¸šæ¿</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æµ‹è¯•2ï¼šç›´æ¥è®¿é—®æµ‹è¯• -->
        <div class="test-section">
            <h2>æµ‹è¯•2ï¼šç›´æ¥è®¿é—®F10é¡µé¢</h2>
            <p style="color: #666; margin-bottom: 15px;">ç‚¹å‡»æŒ‰é’®ç›´æ¥æ‰“å¼€å¯¹åº”è‚¡ç¥¨çš„F10é¡µé¢</p>
            
            <div class="btn-group">
                <button class="btn btn-primary" onclick="openF10Direct('000001')">
                    æ‰“å¼€å¹³å®‰é“¶è¡ŒF10
                </button>
                <button class="btn btn-primary" onclick="openF10Direct('600519')">
                    æ‰“å¼€è´µå·èŒ…å°F10
                </button>
                <button class="btn btn-primary" onclick="openF10Direct('300750')">
                    æ‰“å¼€å®å¾·æ—¶ä»£F10
                </button>
            </div>
        </div>
        
        <!-- æµ‹è¯•3ï¼šURLæ ¼å¼æµ‹è¯• -->
        <div class="test-section">
            <h2>æµ‹è¯•3ï¼šä¸åŒURLæ ¼å¼æµ‹è¯•</h2>
            <p style="color: #666; margin-bottom: 15px;">æµ‹è¯•ä¸åŒçš„URLæ ¼å¼æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®</p>
            
            <div class="btn-group">
                <button class="btn btn-info" onclick="testURLFormats()">
                    è¿è¡ŒURLæ ¼å¼æµ‹è¯•
                </button>
                <button class="btn btn-success" onclick="testBatchOpen()">
                    æ‰¹é‡æ‰“å¼€æµ‹è¯•
                </button>
            </div>
            
            <div id="urlTestResult" class="test-result" style="display: none;">
                <h3>æµ‹è¯•ç»“æœï¼š</h3>
                <div id="urlTestContent"></div>
            </div>
        </div>
        
        <!-- æµ‹è¯•4ï¼šiframeåµŒå…¥æµ‹è¯• -->
        <div class="test-section">
            <h2>æµ‹è¯•4ï¼šiframeåµŒå…¥æµ‹è¯•ï¼ˆå¯èƒ½è¢«é˜»æ­¢ï¼‰</h2>
            <p style="color: #666; margin-bottom: 15px;">æµ‹è¯•æ˜¯å¦å¯ä»¥åœ¨iframeä¸­åµŒå…¥F10é¡µé¢</p>
            
            <div class="btn-group">
                <button class="btn btn-info" onclick="testIframe('000001')">
                    æµ‹è¯•å¹³å®‰é“¶è¡Œ
                </button>
                <button class="btn btn-info" onclick="testIframe('600519')">
                    æµ‹è¯•è´µå·èŒ…å°
                </button>
                <button class="btn btn-success" onclick="clearIframe()">
                    æ¸…é™¤iframe
                </button>
            </div>
            
            <div id="iframeContainer" class="iframe-test" style="display: none;">
                <div class="iframe-header">
                    <span id="iframeTitle">åŠ è½½ä¸­...</span>
                    <button class="btn btn-sm" onclick="clearIframe()">å…³é—­</button>
                </div>
                <div id="iframeContent">
                    <iframe id="f10-iframe" src=""></iframe>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å³é”®èœå• -->
    <div id="contextMenu" class="context-menu">
        <div class="context-menu-header" id="contextMenuHeader">
            è‚¡ç¥¨ä¿¡æ¯
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" onclick="openF10FromMenu()">
            <span>ğŸ“Š</span>
            <span>æŸ¥çœ‹F10èµ„æ–™</span>
        </div>
        <div class="context-menu-item" onclick="openF10NewWindow()">
            <span>ğŸ”—</span>
            <span>æ–°çª—å£æ‰“å¼€F10</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" onclick="copyStockCode()">
            <span>ğŸ“‹</span>
            <span>å¤åˆ¶è‚¡ç¥¨ä»£ç </span>
        </div>
        <div class="context-menu-item" onclick="copyF10URL()">
            <span>ğŸ”—</span>
            <span>å¤åˆ¶F10é“¾æ¥</span>
        </div>
        <div class="context-menu-divider"></div>
        <div class="context-menu-item" onclick="closeContextMenu()">
            <span>âŒ</span>
            <span>å…³é—­èœå•</span>
        </div>
    </div>
    
    <script>
        // å½“å‰é€‰ä¸­çš„è‚¡ç¥¨
        let currentStock = null;
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initStockList();
            initContextMenu();
        });
        
        // åˆå§‹åŒ–è‚¡ç¥¨åˆ—è¡¨
        function initStockList() {
            const stockItems = document.querySelectorAll('.stock-item');
            
            stockItems.forEach(item => {
                // å·¦é”®ç‚¹å‡»é€‰ä¸­
                item.addEventListener('click', function() {
                    document.querySelectorAll('.stock-item').forEach(el => {
                        el.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    currentStock = {
                        code: this.dataset.code,
                        name: this.dataset.name
                    };
                    console.log('é€‰ä¸­è‚¡ç¥¨ï¼š', currentStock);
                });
                
                // å³é”®èœå•
                item.addEventListener('contextmenu', function(e) {
                    e.preventDefault();
                    showContextMenu(e, this.dataset.code, this.dataset.name);
                });
            });
        }
        
        // åˆå§‹åŒ–å³é”®èœå•
        function initContextMenu() {
            // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­èœå•
            document.addEventListener('click', function() {
                closeContextMenu();
            });
            
            // é˜»æ­¢èœå•è‡ªèº«çš„ç‚¹å‡»äº‹ä»¶å†’æ³¡
            document.getElementById('contextMenu').addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }
        
        // æ˜¾ç¤ºå³é”®èœå•
        function showContextMenu(e, code, name) {
            const menu = document.getElementById('contextMenu');
            const header = document.getElementById('contextMenuHeader');
            
            currentStock = { code, name };
            header.textContent = `${code} - ${name}`;
            
            menu.style.left = e.pageX + 'px';
            menu.style.top = e.pageY + 'px';
            menu.classList.add('visible');
            
            console.log('æ˜¾ç¤ºå³é”®èœå•ï¼š', currentStock);
        }
        
        // å…³é—­å³é”®èœå•
        function closeContextMenu() {
            const menu = document.getElementById('contextMenu');
            menu.classList.remove('visible');
        }
        
        // ä»èœå•æ‰“å¼€F10
        function openF10FromMenu() {
            if (currentStock) {
                openF10Direct(currentStock.code);
                closeContextMenu();
            }
        }
        
        // æ–°çª—å£æ‰“å¼€F10
        function openF10NewWindow() {
            if (currentStock) {
                const url = `http://basic.10jqka.com.cn/${currentStock.code}/`;
                window.open(url, '_blank', 'width=1200,height=800');
                closeContextMenu();
            }
        }
        
        // å¤åˆ¶è‚¡ç¥¨ä»£ç 
        function copyStockCode() {
            if (currentStock) {
                navigator.clipboard.writeText(currentStock.code).then(() => {
                    alert(`å·²å¤åˆ¶è‚¡ç¥¨ä»£ç ï¼š${currentStock.code}`);
                    closeContextMenu();
                });
            }
        }
        
        // å¤åˆ¶F10é“¾æ¥
        function copyF10URL() {
            if (currentStock) {
                const url = `http://basic.10jqka.com.cn/${currentStock.code}/`;
                navigator.clipboard.writeText(url).then(() => {
                    alert(`å·²å¤åˆ¶F10é“¾æ¥ï¼š${url}`);
                    closeContextMenu();
                });
            }
        }
        
        // ç›´æ¥æ‰“å¼€F10é¡µé¢
        function openF10Direct(code) {
            const url = `http://basic.10jqka.com.cn/${code}/`;
            console.log('æ‰“å¼€F10é¡µé¢ï¼š', url);
            window.open(url, '_blank');
        }
        
        // æµ‹è¯•URLæ ¼å¼
        function testURLFormats() {
            const testCases = [
                { code: '000001', desc: 'æ·±å¸‚è‚¡ç¥¨ï¼ˆ6ä½ï¼‰' },
                { code: '600519', desc: 'æ²ªå¸‚è‚¡ç¥¨ï¼ˆ6ä½ï¼‰' },
                { code: '300750', desc: 'åˆ›ä¸šæ¿è‚¡ç¥¨' },
                { code: '688111', desc: 'ç§‘åˆ›æ¿è‚¡ç¥¨' },
                { code: 'SZ000001', desc: 'å¸¦æ·±å¸‚å‰ç¼€' },
                { code: 'SH600519', desc: 'å¸¦æ²ªå¸‚å‰ç¼€' },
            ];
            
            const resultDiv = document.getElementById('urlTestResult');
            const contentDiv = document.getElementById('urlTestContent');
            
            resultDiv.style.display = 'block';
            contentDiv.innerHTML = '';
            
            testCases.forEach(test => {
                const url = `http://basic.10jqka.com.cn/${test.code}/`;
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.innerHTML = `
                    <strong>${test.desc}:</strong> 
                    <a href="${url}" target="_blank" style="color: #4299e1;">${url}</a>
                    <span class="result-warning"> (ç‚¹å‡»æµ‹è¯•)</span>
                `;
                contentDiv.appendChild(resultItem);
            });
            
            const note = document.createElement('div');
            note.style.marginTop = '10px';
            note.style.color = '#666';
            note.innerHTML = '<strong>æ³¨æ„ï¼š</strong>åŒèŠ±é¡ºF10é€šå¸¸åªæ¥å—çº¯æ•°å­—è‚¡ç¥¨ä»£ç ï¼Œä¸éœ€è¦å¸‚åœºå‰ç¼€ã€‚';
            contentDiv.appendChild(note);
        }
        
        // æ‰¹é‡æ‰“å¼€æµ‹è¯•
        function testBatchOpen() {
            if (confirm('å°†æ‰“å¼€3ä¸ªæ–°æ ‡ç­¾é¡µè¿›è¡Œæµ‹è¯•ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ')) {
                const codes = ['000001', '600519', '300750'];
                codes.forEach((code, index) => {
                    setTimeout(() => {
                        openF10Direct(code);
                    }, index * 500); // å»¶è¿Ÿæ‰“å¼€ï¼Œé¿å…è¢«æµè§ˆå™¨é˜»æ­¢
                });
            }
        }
        
        // æµ‹è¯•iframeåµŒå…¥
        function testIframe(code) {
            const container = document.getElementById('iframeContainer');
            const iframe = document.getElementById('f10-iframe');
            const title = document.getElementById('iframeTitle');
            const content = document.getElementById('iframeContent');
            
            container.style.display = 'block';
            title.textContent = `åŠ è½½ ${code} F10èµ„æ–™...`;
            
            const url = `http://basic.10jqka.com.cn/${code}/`;
            
            // å…ˆæ˜¾ç¤ºåŠ è½½æç¤º
            content.innerHTML = '<div class="loading">æ­£åœ¨åŠ è½½F10é¡µé¢...</div>';
            
            // è®¾ç½®å»¶è¿ŸåŠ è½½iframe
            setTimeout(() => {
                content.innerHTML = `<iframe id="f10-iframe" src="${url}"></iframe>`;
                
                // ç›‘å¬iframeåŠ è½½
                const newIframe = document.getElementById('f10-iframe');
                newIframe.onload = function() {
                    title.textContent = `${code} F10èµ„æ–™`;
                    console.log('iframeåŠ è½½æˆåŠŸ');
                };
                
                newIframe.onerror = function() {
                    content.innerHTML = '<div class="error-msg">âš ï¸ åŠ è½½å¤±è´¥ï¼šå¯èƒ½ç”±äºè·¨åŸŸé™åˆ¶æˆ–X-Frame-Optionsè®¾ç½®ï¼Œæ— æ³•åœ¨iframeä¸­æ˜¾ç¤ºã€‚å»ºè®®ç›´æ¥åœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€ã€‚</div>';
                    console.error('iframeåŠ è½½å¤±è´¥');
                };
            }, 100);
            
            // æ£€æµ‹è·¨åŸŸé—®é¢˜
            setTimeout(() => {
                try {
                    const testAccess = document.getElementById('f10-iframe').contentWindow.document;
                    content.innerHTML += '<div class="success-msg">âœ… iframeåŠ è½½æˆåŠŸï¼Œå¯ä»¥æ­£å¸¸è®¿é—®</div>';
                } catch (e) {
                    if (content.querySelector('.loading')) {
                        content.innerHTML = '<div class="error-msg">âš ï¸ ç”±äºåŒèŠ±é¡ºç½‘ç«™çš„å®‰å…¨ç­–ç•¥ï¼ˆX-Frame-Optionsæˆ–è·¨åŸŸé™åˆ¶ï¼‰ï¼Œæ— æ³•åœ¨iframeä¸­æ˜¾ç¤ºF10é¡µé¢ã€‚<br>å»ºè®®ä½¿ç”¨"æ–°æ ‡ç­¾é¡µæ‰“å¼€"æ–¹å¼æŸ¥çœ‹ã€‚</div>';
                    }
                    console.error('è·¨åŸŸè®¿é—®é™åˆ¶ï¼š', e);
                }
            }, 2000);
        }
        
        // æ¸…é™¤iframe
        function clearIframe() {
            const container = document.getElementById('iframeContainer');
            const content = document.getElementById('iframeContent');
            
            container.style.display = 'none';
            content.innerHTML = '';
        }
        
        // é¡µé¢åŠ è½½å®Œæˆæç¤º
        window.onload = function() {
            console.log('âœ… F10æµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            console.log('ğŸ“ ä½¿ç”¨è¯´æ˜ï¼š');
            console.log('1. å³é”®ç‚¹å‡»è‚¡ç¥¨åˆ—è¡¨ä¸­çš„é¡¹ç›®');
            console.log('2. é€‰æ‹©"æŸ¥çœ‹F10èµ„æ–™"æ‰“å¼€åŒèŠ±é¡ºF10é¡µé¢');
            console.log('3. ä½¿ç”¨æµ‹è¯•æŒ‰é’®éªŒè¯ä¸åŒçš„è®¿é—®æ–¹å¼');
        };
    </script>
</body>
</html>