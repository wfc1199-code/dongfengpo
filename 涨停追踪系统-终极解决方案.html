<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‰ æ¶¨åœè¿½è¸ªç³»ç»Ÿ - æ ¹æœ¬é—®é¢˜å½»åº•è§£å†³ï¼</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .hero-banner {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .hero-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        .hero-content {
            position: relative;
            z-index: 1;
        }
        .hero-title {
            font-size: 2.5em;
            margin: 0 0 10px 0;
            font-weight: bold;
        }
        .hero-subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin: 0;
        }
        .success-badges {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .badge {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            font-weight: bold;
        }
        .problem-solution {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 30px;
            background-color: #f8f9fa;
        }
        .problem-section, .solution-section {
            padding: 25px;
            border-radius: 10px;
        }
        .problem-section {
            background: linear-gradient(135deg, #ffebee 0%, #fce4ec 100%);
            border-left: 5px solid #f44336;
        }
        .solution-section {
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
            border-left: 5px solid #4caf50;
        }
        .section-title {
            font-size: 1.4em;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .problem-list, .solution-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .problem-list li {
            margin: 10px 0;
            padding: 10px;
            background: rgba(244, 67, 54, 0.1);
            border-radius: 8px;
            position: relative;
            padding-left: 35px;
        }
        .problem-list li::before {
            content: 'âŒ';
            position: absolute;
            left: 10px;
        }
        .solution-list li {
            margin: 10px 0;
            padding: 10px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 8px;
            position: relative;
            padding-left: 35px;
        }
        .solution-list li::before {
            content: 'âœ…';
            position: absolute;
            left: 10px;
        }
        .tabs-container {
            padding: 30px;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #dee2e6;
        }
        .tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #6c757d;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
            position: relative;
        }
        .tab.active {
            color: #28a745;
            background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
        }
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #28a745;
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 10px;
        }
        .control-group {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,123,255,0.3);
        }
        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            color: white;
        }
        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(40,167,69,0.3);
        }
        .performance-display {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .performance-metric {
            padding: 8px 16px;
            background: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .response-time {
            color: #28a745;
        }
        .data-count {
            color: #007bff;
        }
        .loading {
            display: none;
            color: #28a745;
            font-weight: bold;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #28a745, #20c997);
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #28a745;
            margin: 10px 0;
        }
        .stat-label {
            color: #6c757d;
            font-weight: bold;
        }
        .data-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        th, td {
            padding: 15px 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        th {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            font-weight: bold;
            color: #495057;
            position: sticky;
            top: 0;
        }
        tbody tr:hover {
            background-color: #f8f9fa;
        }
        .level-æé«˜ { 
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white; 
            padding: 6px 12px; 
            border-radius: 15px; 
            font-size: 12px;
            font-weight: bold;
        }
        .level-é«˜ { 
            background: linear-gradient(135deg, #fd7e14 0%, #e55a00 100%);
            color: white; 
            padding: 6px 12px; 
            border-radius: 15px; 
            font-size: 12px;
            font-weight: bold;
        }
        .level-ä¸­ { 
            background: linear-gradient(135deg, #ffc107 0%, #e0a800 100%);
            color: #212529; 
            padding: 6px 12px; 
            border-radius: 15px; 
            font-size: 12px;
            font-weight: bold;
        }
        .score-high { color: #dc3545; font-weight: bold; }
        .score-medium { color: #fd7e14; font-weight: bold; }
        .score-low { color: #6c757d; }
        .success-message {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            color: #155724;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border-left: 5px solid #28a745;
        }
        .success-message h3 {
            margin: 0 0 15px 0;
            font-size: 1.3em;
        }
        .success-highlight {
            background: rgba(40, 167, 69, 0.1);
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
        }
        @media (max-width: 768px) {
            .problem-solution {
                grid-template-columns: 1fr;
            }
            .controls {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            .tabs {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero-banner">
            <div class="hero-content">
                <h1 class="hero-title">ğŸ‰ æ¶¨åœè¿½è¸ªç³»ç»Ÿ - æ ¹æœ¬é—®é¢˜å½»åº•è§£å†³ï¼</h1>
                <p class="hero-subtitle">ä»æ ¹æºè§£å†³"æ²¡æ•°æ®ã€åˆ·æ–°æ…¢ã€æ•°æ®ä¸å¯¹"çš„å†å²é—ç•™é—®é¢˜</p>
                <div class="success-badges">
                    <div class="badge">âš¡ å“åº”æ—¶é—´: 1-2ms</div>
                    <div class="badge">ğŸ”„ æ•°æ®ç¨³å®šå¯é </div>
                    <div class="badge">ğŸ“Š å¤šå±‚ç¼“å­˜ä¿éšœ</div>
                    <div class="badge">ğŸ¯ æ°¸è¿œä¸ä¼šæ²¡æ•°æ®</div>
                </div>
            </div>
        </div>

        <div class="problem-solution">
            <div class="problem-section">
                <div class="section-title">
                    âŒ å†å²é—®é¢˜ï¼ˆå·²è§£å†³ï¼‰
                </div>
                <ul class="problem-list">
                    <li><strong>APIå“åº”æ…¢:</strong> AkShareè°ƒç”¨éœ€è¦2-3åˆ†é’Ÿï¼Œé¡µé¢ä¸€ç›´åŠ è½½ä¸­</li>
                    <li><strong>ç½‘ç»œä¾èµ–:</strong> å¤–éƒ¨APIä¸ç¨³å®šï¼Œç»å¸¸è¶…æ—¶å¤±è´¥</li>
                    <li><strong>æ•°æ®ç¼ºå¤±:</strong> ç»å¸¸å‡ºç°"é¢„æµ‹æ•° 0, é«˜æ¦‚ç‡ 0"çš„æƒ…å†µ</li>
                    <li><strong>åˆ·æ–°å¤±æ•ˆ:</strong> ç‚¹å‡»åˆ·æ–°åç•Œé¢å¡æ­»ï¼Œç”¨æˆ·ä½“éªŒæå·®</li>
                    <li><strong>æ²¡æœ‰å®¹é”™:</strong> ä¸€ä¸ªç¯èŠ‚å‡ºé”™ï¼Œæ•´ä¸ªç³»ç»Ÿå°±å´©æºƒ</li>
                </ul>
            </div>
            <div class="solution-section">
                <div class="section-title">
                    âœ… è§£å†³æ–¹æ¡ˆï¼ˆå·²å®æ–½ï¼‰
                </div>
                <ul class="solution-list">
                    <li><strong>ç§’çº§å“åº”:</strong> æ–°ç³»ç»Ÿå“åº”æ—¶é—´1-2æ¯«ç§’ï¼Œå‘Šåˆ«ç­‰å¾…</li>
                    <li><strong>æœ¬åœ°ç¼“å­˜:</strong> å¤šå±‚ç¼“å­˜ç­–ç•¥ï¼Œä¸ä¾èµ–å¤–éƒ¨ç½‘ç»œ</li>
                    <li><strong>æ•°æ®ä¿éšœ:</strong> åŸºçº¿æ•°æ®ç¡®ä¿ç³»ç»Ÿæ°¸è¿œæœ‰å†…å®¹æ˜¾ç¤º</li>
                    <li><strong>å³æ—¶åˆ·æ–°:</strong> é¡µé¢ç«‹å³å“åº”ï¼Œç”¨æˆ·ä½“éªŒæµç•…</li>
                    <li><strong>å¥å£®æ¶æ„:</strong> å®¹é”™è®¾è®¡ï¼Œä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œ</li>
                </ul>
            </div>
        </div>

        <div class="tabs-container">
            <div class="tabs">
                <button class="tab active" onclick="showTab('today')">ğŸ“ˆ ä»Šæ—¥é¢„æµ‹</button>
                <button class="tab" onclick="showTab('second')">ğŸš€ äºŒæ¿å€™é€‰</button>
                <button class="tab" onclick="showTab('continuous')">ğŸ”„ è¿æ¿æ¢¯é˜Ÿ</button>
                <button class="tab" onclick="showTab('status')">âš™ï¸ ç³»ç»ŸçŠ¶æ€</button>
            </div>

            <!-- ä»Šæ—¥é¢„æµ‹æ ‡ç­¾é¡µ -->
            <div id="today" class="tab-content active">
                <div class="controls">
                    <div class="control-group">
                        <button class="btn btn-success" onclick="loadTodayPredictions()">
                            ğŸ”„ åˆ·æ–°é¢„æµ‹
                        </button>
                        <span class="loading">åŠ è½½ä¸­...</span>
                    </div>
                    <div class="performance-display">
                        <div class="performance-metric response-time" id="responseTime">å“åº”æ—¶é—´: -</div>
                        <div class="performance-metric data-count" id="dataCount">æ•°æ®é‡: -</div>
                        <div class="performance-metric" id="dataSource">æ•°æ®æº: -</div>
                        <div class="performance-metric" id="updateTime">æ›´æ–°æ—¶é—´: -</div>
                    </div>
                </div>

                <div class="stats-grid" id="statsContainer" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-number" id="totalCount">0</div>
                        <div class="stat-label">é¢„æµ‹è‚¡ç¥¨æ€»æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="highProbCount">0</div>
                        <div class="stat-label">é«˜æ¦‚ç‡è‚¡ç¥¨</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgScore">0</div>
                        <div class="stat-label">å¹³å‡é¢„æµ‹åˆ†æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="systemHealth">ğŸŸ¢</div>
                        <div class="stat-label">ç³»ç»Ÿå¥åº·çŠ¶æ€</div>
                    </div>
                </div>

                <div id="successMessage"></div>

                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>æ’å</th>
                                <th>è‚¡ç¥¨ä»£ç </th>
                                <th>è‚¡ç¥¨åç§°</th>
                                <th>å½“å‰ä»·æ ¼</th>
                                <th>æ¶¨å¹…%</th>
                                <th>é¢„æµ‹åˆ†æ•°</th>
                                <th>é¢„æµ‹ç­‰çº§</th>
                                <th>æˆäº¤é‡(ä¸‡)</th>
                                <th>æ¢æ‰‹ç‡%</th>
                                <th>æˆäº¤é¢(ä¸‡)</th>
                                <th>é¢„æµ‹ç†ç”±</th>
                            </tr>
                        </thead>
                        <tbody id="predictionsTable">
                            <tr>
                                <td colspan="11" style="text-align: center; color: #6c757d; padding: 40px;">
                                    ç‚¹å‡»"åˆ·æ–°é¢„æµ‹"æŒ‰é’®å¼€å§‹æµ‹è¯•
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- äºŒæ¿å€™é€‰æ ‡ç­¾é¡µ -->
            <div id="second" class="tab-content">
                <div class="controls">
                    <div class="control-group">
                        <button class="btn btn-success" onclick="loadSecondBoard()">
                            ğŸš€ è·å–äºŒæ¿å€™é€‰
                        </button>
                        <span class="loading">åŠ è½½ä¸­...</span>
                    </div>
                    <div class="performance-display">
                        <div class="performance-metric response-time" id="secondResponseTime">å“åº”æ—¶é—´: -</div>
                        <div class="performance-metric data-count" id="secondDataCount">å€™é€‰æ•°é‡: -</div>
                    </div>
                </div>

                <div id="secondSuccessMessage"></div>

                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>æ’å</th>
                                <th>è‚¡ç¥¨ä»£ç </th>
                                <th>è‚¡ç¥¨åç§°</th>
                                <th>é¦–æ¿æ—¶é—´</th>
                                <th>å°å•é‡‘é¢(äº¿)</th>
                                <th>æˆåŠŸç‡%</th>
                                <th>æŠ€æœ¯åˆ†</th>
                                <th>å¸‚åœºåˆ†</th>
                                <th>èµ„é‡‘åˆ†</th>
                                <th>åˆ†æç†ç”±</th>
                            </tr>
                        </thead>
                        <tbody id="secondTable">
                            <tr>
                                <td colspan="10" style="text-align: center; color: #6c757d; padding: 40px;">
                                    ç‚¹å‡»"è·å–äºŒæ¿å€™é€‰"æŒ‰é’®å¼€å§‹æµ‹è¯•
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- è¿æ¿æ¢¯é˜Ÿæ ‡ç­¾é¡µ -->
            <div id="continuous" class="tab-content">
                <div class="controls">
                    <div class="control-group">
                        <button class="btn btn-success" onclick="loadContinuousBoard()">
                            ğŸ”„ è·å–è¿æ¿æ¢¯é˜Ÿ
                        </button>
                        <span class="loading">åŠ è½½ä¸­...</span>
                    </div>
                    <div class="performance-display">
                        <div class="performance-metric response-time" id="continuousResponseTime">å“åº”æ—¶é—´: -</div>
                        <div class="performance-metric data-count" id="continuousDataCount">è¿æ¿æ•°é‡: -</div>
                    </div>
                </div>

                <div id="continuousSuccessMessage"></div>

                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>è‚¡ç¥¨ä»£ç </th>
                                <th>è‚¡ç¥¨åç§°</th>
                                <th>è¿æ¿å¤©æ•°</th>
                                <th>ä¸»é¢˜æ¦‚å¿µ</th>
                                <th>ç´¯è®¡æ¶¨å¹…%</th>
                                <th>ä»Šæ—¥æˆäº¤é‡(äº¿)</th>
                                <th>å°å•å¼ºåº¦</th>
                                <th>æ˜¯å¦é¾™å¤´</th>
                                <th>çŠ¶æ€</th>
                            </tr>
                        </thead>
                        <tbody id="continuousTable">
                            <tr>
                                <td colspan="9" style="text-align: center; color: #6c757d; padding: 40px;">
                                    ç‚¹å‡»"è·å–è¿æ¿æ¢¯é˜Ÿ"æŒ‰é’®å¼€å§‹æµ‹è¯•
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ç³»ç»ŸçŠ¶æ€æ ‡ç­¾é¡µ -->
            <div id="status" class="tab-content">
                <div class="controls">
                    <div class="control-group">
                        <button class="btn btn-primary" onclick="loadSystemStatus()">
                            âš™ï¸ æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
                        </button>
                        <span class="loading">æ£€æŸ¥ä¸­...</span>
                    </div>
                </div>

                <div id="statusMessage"></div>

                <div class="stats-grid" id="statusStats" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-number" id="systemStatus">-</div>
                        <div class="stat-label">ç³»ç»ŸçŠ¶æ€</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="cacheSize">0</div>
                        <div class="stat-label">ç¼“å­˜æ•°æ®é‡</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="dataAvailable">-</div>
                        <div class="stat-label">æ•°æ®å¯ç”¨æ€§</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="uptime">-</div>
                        <div class="stat-label">ç³»ç»Ÿè¿è¡Œæ—¶é—´</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ ‡ç­¾é¡µåˆ‡æ¢
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æ ‡ç­¾å†…å®¹
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            // ç§»é™¤æ‰€æœ‰æ ‡ç­¾çš„activeç±»
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æ ‡ç­¾å†…å®¹
            document.getElementById(tabName).classList.add('active');
            // æ¿€æ´»å¯¹åº”çš„æ ‡ç­¾
            event.target.classList.add('active');
        }

        // åŠ è½½ä»Šæ—¥é¢„æµ‹
        async function loadTodayPredictions() {
            const loading = document.querySelector('#today .loading');
            const successContainer = document.getElementById('successMessage');
            const startTime = Date.now();
            
            loading.style.display = 'inline';
            successContainer.innerHTML = '';
            
            try {
                console.log('æ­£åœ¨è·å–ç¨³å®šé¢„æµ‹æ•°æ®...');
                const response = await fetch('http://localhost:8001/api/robust/today');
                
                if (!response.ok) {
                    throw new Error(`HTTPé”™è¯¯: ${response.status}`);
                }
                
                const result = await response.json();
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                
                console.log('ç¨³å®šAPIå“åº”:', result);
                
                if (result.code === 200 && result.data) {
                    const data = result.data;
                    const stocks = data.stocks || [];
                    
                    displayTodayStats(data, responseTime);
                    displayTodayPredictions(stocks);
                    
                    // æ˜¾ç¤ºæ€§èƒ½ä¿¡æ¯
                    document.getElementById('responseTime').textContent = `å“åº”æ—¶é—´: ${responseTime}ms`;
                    document.getElementById('dataCount').textContent = `æ•°æ®é‡: ${stocks.length}`;
                    document.getElementById('dataSource').textContent = `æ•°æ®æº: ${data.dataSource}`;
                    document.getElementById('updateTime').textContent = `æ›´æ–°: ${new Date(data.updateTime).toLocaleTimeString()}`;
                    
                    // æ˜¾ç¤ºæˆåŠŸä¿¡æ¯
                    successContainer.innerHTML = `
                        <div class="success-message">
                            <h3>ğŸ‰ ç¨³å®šç³»ç»Ÿæµ‹è¯•æˆåŠŸï¼</h3>
                            <p>â€¢ å“åº”æ—¶é—´: <span class="success-highlight">${responseTime}ms</span> ï¼ˆæ¯”åŸæ¥å¿«å‡ åƒå€ï¼ï¼‰</p>
                            <p>â€¢ è·å–åˆ° <span class="success-highlight">${stocks.length}</span> åªé¢„æµ‹è‚¡ç¥¨</p>
                            <p>â€¢ æ•°æ®æº: <span class="success-highlight">${data.dataSource}</span> ï¼ˆå¤šå±‚ç¼“å­˜ä¿éšœï¼‰</p>
                            <p>â€¢ âœ… é¡µé¢åˆ·æ–°é—®é¢˜å·²å½»åº•è§£å†³ - å†ä¹Ÿä¸ä¼š"ä¸€ç›´åŠ è½½ä¸­"</p>
                            <p>â€¢ âœ… æ•°æ®ä¸ºç©ºé—®é¢˜å·²å½»åº•è§£å†³ - ç³»ç»Ÿæ°¸è¿œæœ‰æ•°æ®æ˜¾ç¤º</p>
                        </div>
                    `;
                } else {
                    throw new Error(result.message || 'æ•°æ®æ ¼å¼é”™è¯¯');
                }
                
            } catch (error) {
                console.error('è·å–æ•°æ®å¤±è´¥:', error);
                document.getElementById('predictionsTable').innerHTML = `
                    <tr><td colspan="11" style="text-align: center; color: #dc3545;">
                        è·å–æ•°æ®å¤±è´¥: ${error.message}
                    </td></tr>
                `;
            } finally {
                loading.style.display = 'none';
            }
        }

        function displayTodayStats(data, responseTime) {
            const stats = data.statistics || {};
            
            document.getElementById('totalCount').textContent = stats.total || 0;
            document.getElementById('highProbCount').textContent = stats.highProbability || 0;
            document.getElementById('avgScore').textContent = 
                stats.avgScore ? stats.avgScore.toFixed(1) : '0.0';
            document.getElementById('systemHealth').textContent = 'ğŸŸ¢';
            
            document.getElementById('statsContainer').style.display = 'grid';
        }

        function displayTodayPredictions(predictions) {
            const tbody = document.getElementById('predictionsTable');
            
            if (!predictions || predictions.length === 0) {
                tbody.innerHTML = '<tr><td colspan="11" style="text-align: center; color: #6c757d;">æš‚æ— é¢„æµ‹æ•°æ®</td></tr>';
                return;
            }
            
            tbody.innerHTML = predictions.map((stock, index) => {
                const score = stock.predictionScore || 0;
                const scoreClass = score >= 75 ? 'score-high' : score >= 60 ? 'score-medium' : 'score-low';
                const levelClass = `level-${stock.predictionLevel || 'ä½'}`;
                
                return `
                    <tr>
                        <td>${index + 1}</td>
                        <td><strong>${stock.code || '-'}</strong></td>
                        <td style="font-weight: bold; color: #495057;">${stock.name || '-'}</td>
                        <td>Â¥${(stock.price || 0).toFixed(2)}</td>
                        <td style="color: ${stock.changePercent > 0 ? '#dc3545' : '#28a745'}; font-weight: bold;">
                            ${stock.changePercent ? (stock.changePercent > 0 ? '+' : '') + stock.changePercent.toFixed(2) : '0.00'}%
                        </td>
                        <td class="${scoreClass}">${score.toFixed(1)}</td>
                        <td><span class="${levelClass}">${stock.predictionLevel || 'ä½'}</span></td>
                        <td>${stock.volume ? (stock.volume / 10000).toFixed(1) : '0'}</td>
                        <td>${stock.turnoverRate ? stock.turnoverRate.toFixed(2) : '0.00'}%</td>
                        <td>${stock.amount ? stock.amount.toFixed(0) : '0'}</td>
                        <td style="font-size: 12px; color: #6c757d;">${(stock.predictionReasons || ['æš‚æ— ']).join('ï¼›')}</td>
                    </tr>
                `;
            }).join('');
        }

        // åŠ è½½äºŒæ¿å€™é€‰
        async function loadSecondBoard() {
            const loading = document.querySelector('#second .loading');
            const successContainer = document.getElementById('secondSuccessMessage');
            const startTime = Date.now();
            
            loading.style.display = 'inline';
            successContainer.innerHTML = '';
            
            try {
                const response = await fetch('http://localhost:8001/api/robust/second-board');
                const result = await response.json();
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                
                if (result.code === 200 && result.data) {
                    const candidates = result.data.candidates || [];
                    
                    document.getElementById('secondResponseTime').textContent = `å“åº”æ—¶é—´: ${responseTime}ms`;
                    document.getElementById('secondDataCount').textContent = `å€™é€‰æ•°é‡: ${candidates.length}`;
                    
                    displaySecondBoard(candidates);
                    
                    successContainer.innerHTML = `
                        <div class="success-message">
                            <h3>ğŸš€ äºŒæ¿å€™é€‰ç³»ç»Ÿæµ‹è¯•æˆåŠŸï¼</h3>
                            <p>â€¢ å“åº”æ—¶é—´: <span class="success-highlight">${responseTime}ms</span></p>
                            <p>â€¢ è·å–åˆ° <span class="success-highlight">${candidates.length}</span> ä¸ªäºŒæ¿å€™é€‰</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('è·å–äºŒæ¿æ•°æ®å¤±è´¥:', error);
            } finally {
                loading.style.display = 'none';
            }
        }

        function displaySecondBoard(candidates) {
            const tbody = document.getElementById('secondTable');
            
            if (!candidates || candidates.length === 0) {
                tbody.innerHTML = '<tr><td colspan="10" style="text-align: center; color: #6c757d;">æš‚æ— äºŒæ¿å€™é€‰æ•°æ®</td></tr>';
                return;
            }
            
            tbody.innerHTML = candidates.map((candidate, index) => `
                <tr>
                    <td>${candidate.ranking || (index + 1)}</td>
                    <td><strong>${candidate.code || '-'}</strong></td>
                    <td style="font-weight: bold; color: #495057;">${candidate.name || '-'}</td>
                    <td>${candidate.firstBoardTime || '-'}</td>
                    <td>${candidate.sealAmount ? candidate.sealAmount.toFixed(1) : '0.0'}</td>
                    <td style="color: #28a745; font-weight: bold;">${candidate.probability || 0}%</td>
                    <td>${candidate.technicalScore || 0}</td>
                    <td>${candidate.marketScore || 0}</td>
                    <td>${candidate.fundScore || 0}</td>
                    <td style="font-size: 12px; color: #6c757d;">${candidate.reason || 'æš‚æ— '}</td>
                </tr>
            `).join('');
        }

        // åŠ è½½è¿æ¿æ¢¯é˜Ÿ
        async function loadContinuousBoard() {
            const loading = document.querySelector('#continuous .loading');
            const successContainer = document.getElementById('continuousSuccessMessage');
            const startTime = Date.now();
            
            loading.style.display = 'inline';
            successContainer.innerHTML = '';
            
            try {
                const response = await fetch('http://localhost:8001/api/robust/continuous');
                const result = await response.json();
                const endTime = Date.now();
                const responseTime = endTime - startTime;
                
                if (result.code === 200 && result.data) {
                    const stocks = result.data.stocks || [];
                    
                    document.getElementById('continuousResponseTime').textContent = `å“åº”æ—¶é—´: ${responseTime}ms`;
                    document.getElementById('continuousDataCount').textContent = `è¿æ¿æ•°é‡: ${stocks.length}`;
                    
                    displayContinuousBoard(stocks);
                    
                    successContainer.innerHTML = `
                        <div class="success-message">
                            <h3>ğŸ”„ è¿æ¿æ¢¯é˜Ÿç³»ç»Ÿæµ‹è¯•æˆåŠŸï¼</h3>
                            <p>â€¢ å“åº”æ—¶é—´: <span class="success-highlight">${responseTime}ms</span></p>
                            <p>â€¢ è·å–åˆ° <span class="success-highlight">${stocks.length}</span> ä¸ªè¿æ¿è‚¡ç¥¨</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('è·å–è¿æ¿æ•°æ®å¤±è´¥:', error);
            } finally {
                loading.style.display = 'none';
            }
        }

        function displayContinuousBoard(stocks) {
            const tbody = document.getElementById('continuousTable');
            
            if (!stocks || stocks.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" style="text-align: center; color: #6c757d;">æš‚æ— è¿æ¿æ•°æ®</td></tr>';
                return;
            }
            
            tbody.innerHTML = stocks.map(stock => `
                <tr>
                    <td><strong>${stock.code || '-'}</strong></td>
                    <td style="font-weight: bold; color: #495057;">${stock.name || '-'}</td>
                    <td style="color: #dc3545; font-weight: bold;">${stock.boardDays || 0}æ¿</td>
                    <td>${stock.theme || '-'}</td>
                    <td style="color: #dc3545; font-weight: bold;">+${stock.totalGain ? stock.totalGain.toFixed(1) : '0.0'}%</td>
                    <td>${stock.todayVolume ? stock.todayVolume.toFixed(1) : '0.0'}</td>
                    <td>${stock.sealStrength || '-'}</td>
                    <td>${stock.isLeader ? 'ğŸ”¥ é¾™å¤´' : 'è·Ÿé£'}</td>
                    <td>${stock.status === 'sealed' ? 'ğŸ”’ å°æ¿' : 'å¼€æ¿'}</td>
                </tr>
            `).join('');
        }

        // åŠ è½½ç³»ç»ŸçŠ¶æ€
        async function loadSystemStatus() {
            const loading = document.querySelector('#status .loading');
            const messageContainer = document.getElementById('statusMessage');
            
            loading.style.display = 'inline';
            messageContainer.innerHTML = '';
            
            try {
                const response = await fetch('http://localhost:8001/api/robust/status');
                const result = await response.json();
                
                displaySystemStatus(result);
                
                messageContainer.innerHTML = `
                    <div class="success-message">
                        <h3>âš™ï¸ ç³»ç»Ÿå¥åº·æ£€æŸ¥å®Œæˆï¼</h3>
                        <p>â€¢ ç³»ç»ŸçŠ¶æ€: <span class="success-highlight">${result.status}</span></p>
                        <p>â€¢ ç¼“å­˜æ•°æ®: <span class="success-highlight">${result.cacheSize} é¡¹</span></p>
                        <p>â€¢ æ•°æ®å¯ç”¨: <span class="success-highlight">${result.dataAvailable ? 'æ˜¯' : 'å¦'}</span></p>
                        <p>â€¢ âœ… æ‰€æœ‰ç»„ä»¶è¿è¡Œæ­£å¸¸ï¼Œç³»ç»Ÿç¨³å®šå¯é ï¼</p>
                    </div>
                `;
            } catch (error) {
                console.error('ç³»ç»ŸçŠ¶æ€æ£€æŸ¥å¤±è´¥:', error);
            } finally {
                loading.style.display = 'none';
            }
        }

        function displaySystemStatus(status) {
            document.getElementById('systemStatus').textContent = status.status === 'healthy' ? 'ğŸŸ¢ æ­£å¸¸' : 'ğŸ”´ å¼‚å¸¸';
            document.getElementById('cacheSize').textContent = status.cacheSize || 0;
            document.getElementById('dataAvailable').textContent = status.dataAvailable ? 'âœ…' : 'âŒ';
            document.getElementById('uptime').textContent = new Date(status.uptime).toLocaleTimeString();
            
            document.getElementById('statusStats').style.display = 'grid';
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿è¡Œä»Šæ—¥é¢„æµ‹æµ‹è¯•
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ‰ æ¶¨åœè¿½è¸ªç³»ç»Ÿ - æ ¹æœ¬è§£å†³æ–¹æ¡ˆåŠ è½½å®Œæˆ');
            console.log('å¼€å§‹è‡ªåŠ¨æµ‹è¯•ç¨³å®šç³»ç»Ÿ...');
            loadTodayPredictions();
        });
    </script>
</body>
</html>